\startcomponent co-typography

\environment contextref-env
\product contextref

\def\definition#1{{\it #1}}

% this chapter needs lots of typescripts

\usetypescript[map,sans,mono,handwriting,calligraphy,serif]
              [helvetica,schoolbook,times,antykwa-torunska,modern]


\chapter[typography]{Typography}

\todo{Rationale for this chapter: it should contain everything you 
need to know about {\bf using} fonts, the title may change later. The following 
chapter will be about {\bf defining} fonts.}

\section{Introduction}
\index{typography}

Throughout the millennia humans have developed and adapted methods for
storing facts and thoughts on a variety of different mediums. A very
efficient way of doing this is using logograms, like Chinese have done
for ages. Another method is to represent each syllable in a word by a
symbol, like the Japanese do when writing telegrams. However, the most
common way of storing characters is by using a limited set of shapes
representing basic sounds (a.k.a. phonemes). Such a collection is
called an \definition{alphabet}, and the shapes are called
\definition{letters}.

\TEX\ is primarily meant for typesetting languages that 
use this third method. The other two methods can also be dealt
with, but some extra effort is needed. In this chapter we will focus
on languages that use alphabets, the other methods will be
explained in later chapters.

The shapes representing the characters that make up an alphabet are
more or less standardized, and thereby can be recognized by readers
even if their details differ.  A collection of pictures matching
character shapes is called a \definition{font}, and the pictures in a
font are called \definition{glyphs}.

\startlinecorrection
\ruledhbox to \hsize
  {\hss
   \definefont[test][ComputerModern          at 60pt]\test gap\setstrut\strut\hss
   \definefont[test][Helvetica               at 60pt]\test gap\hss
   \definefont[test][Times-Roman             at 60pt]\test gap\hss
   \definefont[test][AntykwaTorunska-Regular at 60pt]\test gap\hss}
\stoplinecorrection

From left to right we see a Computer Modern font, a Helvetica lookalike, a
Times Roman lookalike and the Antiqua Torunska font, all scaled to 60pt.
As you can see, quite some variation is possible and when intermixed,
the result is not always pleasing to look at. The term \definition{fonts collection}
refers to a set of fonts combined together in such a way that the
overall appearance on a page looks good and reading is as comfortable
as possible.

\startlinecorrection
\ruledhbox to \hsize
  {\hss
   \definefont[test][Schoolbook-Roman      at 48pt]\test lap\setstrut\strut\hss
   \definefont[test][Schoolbook-Bold       at 48pt]\test lap\hss
   \definefont[test][Schoolbook-Italic     at 48pt]\test lap\hss
   \definefont[test][Schoolbook-BoldItalic at 48pt]\test lap\hss}
\stoplinecorrection

Even within a single font design there can be variations. In the
example above we see a light, a bold, an italic, and a bold italic
\definition{alternative} of a single font. Such a set of fonts with 
the same basic design is known as a \definition{font family}.

The distance between the individual glyphs in a word depends
on the combinations of these glyphs. In the next sample, the
gap between the~b and the~o as well as the distance between
the~o and the~x is slightly altered. This is called kerning.

\startlinecorrection
\vbox
  {\forgetall
   \vfill
   \definefont[test][ComputerModern at 48pt]\test
   \hbox{box}
   \vskip-36pt
   \def\\#1%
     {\toprulefalse
      \bottomrulefalse
      \ruledhbox{\vrule width 0pt height 72pt#1}}
   \hbox{\\b\\o\\x}}
\stoplinecorrection

The font shown here is Computer Modern, the default \TEX\ font. This
font is designed by Donald Knuth. The Computer Modern has many kerning
pairs, while the Palatino||like font that is used for most of the text
in this manual has only a few.

Micro||typography like kerning pairs are not to be altered by the
user, it is part of the font design and the required data is stored
inside the font file, together with the drawing routines for the
actual pictures. It {\em is\/} possible for the user to alter fonts
and interline spacing and some more aspects on the level of
macro||typography. The choice of font is the main topic of this
chapter.

There are many different methods that can be used to classify
fonts. There are classification systems based on the period in which
the style was first developed; on the characteristics of the font; or
the font application, like a newspaper or a book. Often, classification
systems mix these characteristics up to some point.

For example, the Computer Modern family can be classified as a
\quote{modern} font. This is a classication that primarily indicates
a period (late 18\high{th} century), but it also implies a particular
shape: \quote{modern} fonts have a high contrast between thick and
thin strokes, and their stress axis is perfectly vertical.

At the same time, specific fonts in the Computer Modern family can be
classified as \quote{serif} (glyphs strokes have embellishments at the
end), \quote{sans serif} (shapes end abruptly), or \quote{monospaced}
(all glyphs have the same width). 

The Computer Modern family is in fact inspired by one font in particular:
\quote{Modern 8a} by the Monotype corporation. Knuth implemented
Computer Modern in \METAFONT\ using parameters so that he could
generate a whole collection of fonts all closely matching eachother in
style. In \CONTEXT\ you will normally use a reimplementation of
Computer Modern using a more modern file format (Type~1 or OpenType).
This new version is called \quote{Latin Modern}, and also features an
extended glyph set making it usable for languages that could not be
typeset with Knuth's original fonts.

\startlinecorrection
\ruledhbox to \hsize
  {\hss
   \definefont[test][LMRoman-Regular           at 48pt]\test ok\setstrut\strut\hss
   \definefont[test][LMSans-Regular            at 48pt]\test ok\hss
   \definefont[test][LMTypewriter-Regular      at 48pt]\test ok\hss
   \definefont[test][LMRoman-CapsRegular       at 48pt]\test ok\hss
   \definefont[test][LMTypewriterVarWd-Regular at 48pt]\test ok\hss}
\stoplinecorrection

In this example we see five font styles of Latin Modern: the Roman,
Sans, Typewriter, Smallcaps and Variable Typewriter. Computer Modern
is one of the few font families that comes with dedicated design
sizes.  The example below shows the differences of a 5, 7, 9, 12 and
17~point design scaled up to 48 points. Such nuances in font size are
seldom seen these days.

\startlinecorrection
\ruledhbox to \hsize
  {\hss
   \definefont[test][cmr5  at 48pt]\test ok\setstrut\strut\hss
   \definefont[test][cmr7  at 48pt]\test ok\hss
   \definefont[test][cmr9  at 48pt]\test ok\hss
   \definefont[test][cmr12 at 48pt]\test ok\hss
   \definefont[test][cmr17 at 48pt]\test ok\hss}
\stoplinecorrection

As explained earlier, the general appearance of a font style can be
classified according to many schemes. 
In \in {table} [tab:font triplets] we see some examples of the naming
of font styles that are often found together in a single document.

\startbuffer[styles]

\vskip1ex
\startcombination[3*3]
  {\rmtfc\setupinterlinespace    Serif\strut \end} {}
  {\sstfc\setupinterlinespace     Sans\strut \end} {}
  {\tttfc\setupinterlinespace     Mono\strut \end} {}
  {\rmtfc\setupinterlinespace  Regular\strut \end} {}
  {\sstfc\setupinterlinespace  Support\strut \end} {}
  {\tttfc\setupinterlinespace TeleType\strut \end} {}
  {\rmtfc\setupinterlinespace    Roman\strut \end} {}
  {\sstfc\setupinterlinespace     Sans\strut \end} {}
  {\tttfc\setupinterlinespace     Type\strut \end} {}
\stopcombination
\vskip1ex

\stopbuffer

\placetable
  [here][tab:font triplets]
  {Some ways of classifying the styles in a font.}
  {\getbuffer[styles]}

The top two series are normally used by typographers, the bottom
series is what was traditionally used in plain \TEX. In \CONTEXT\ all
three series of terms can be used because they are remapped to the
same set of internal commands. As we will see, the command \type {\rm}
is used to switch to a roman|/|serif|/|regular style, and \type {\tt}
for switching to mono spaced or typewriter style, etcetera.

Text can be typeset in different font sizes. We often use the unit
\type {pt} to specify the size. The availability of these font sizes
are defined in definition files.  Traditionally font designers used to
design a glyph collection for each font size, but nowadays most fonts
have a single design size of 10 points, or small set of sizes with
names indicating their proposed use, like {\em caption}, {\em text},
and {\em display}.

In the next sections we will go into switching of font styles and
fonts in your documents. Be warned that the font switching mechanism
is rather complex. This is caused by the different modes like math
mode and text mode in \CONTEXT. If you want to be understand the
mechanism fully, you will have to acquaint yourself with the concept
of encoding vectors and obtain some knowledge on fonts and their
peculiarities.

\section[bodyfont]{The mechanism}
\index{roman}
\index{sans serif}
\index{typewriter}

Font switching is one of the eldest features of \CONTEXT\ because font
switching is indispensable in a macro package.  During the years
extensions to the font switching mechanism were inevitable. We have
chosen the following starting points during the development of this
mechanism:

\startitemize[packed]
\item To change a {\em style} must be easy, this
      means switching to: roman (serif, regular), sans serif
      (support), teletype (monospaced) etc. (\type {\rm},
      \type {\ss}, \type {\tt} etc.)
\item More than one {\em alternative} set of glyphs shapes must be
      available like slanted and bold (\type {\sl} and \type {\bf}).
\item Different font {\em families} like Latin Modern Roman 
      and Lucida Bright must be supported.
\item It must be possbile to combine different families into font
      {\em collections}.
\item Different sub|| and superscripts must be
      available. These script sizes have to be retained across the
      switching of family, style and alternative.
\item It should be possible to combine all of these requirements
      into a single definition unit called a {\em body font}.
\item Changing the global font collection as wel as the size must 
      also be easy, and so sizes between 8pt and 14.4pt must be
      available by default.
\stopitemize

Before reading further, please stop for a moment to make sure you
thoroughly comprehend the above paragraphs. \CONTEXT's terminology
probably differs from what you are accustomed to, especially if you
were previously a \LATEX\ user.

\section[font switching]{Font switching}
\index{fonts}
\index{roman}
\index{slanted}
\index{boldface}
\index{italic}
\index{typewriter}
\index{sans serif}
\index{old style}
\index{medaeval numbers}

The mechanism to switch from one style to another is somewhat complex,
not in the least because the terminology is a bit fuzzy.  A quick
recap: we call a collection of fonts, like Lucida or Computer Modern
Roman, a {\em family}.  Within such a family, the members can be
grouped according to characteristics. Such a group is called a {\em
style}. Examples of styles within a family are: \quote{roman},
\quote{sans serif} and \quote{teletype}. We saw that there can
be alternative classifications, but they all refer to the presence of
serifs and the glyphs having equal widths. Within a style there
can be {\em alternatives}, like \quote{boldface} and \quote{slanted}.

There are different ways to change into a new a style or
alternative. You can use \type {\ss} to switch to a sans
serif font style and \type {\bf} to get a bold alternative.
When a different style is chosen, the alternatives adapt
themselves to this style. Often we will typeset the document
in one family and style. This is called the bodyfont.

Consistent use of commands like \type {\bf} and \type
{\sl} in the text will automatically result in the desired
bold and slanted altermatives when you change the family or
style in the setup area of your input file. 

\subsection[font style switching]{Font style switching}

Switching to another font style is done by one of five 
two-letter commands that are listed in~\in{table}[tab:style switches].

\startbuffer[styleswitch]
\vskip 1ex
\starttabulate[|l|l|]
%\NC \bf style  \NC \bf Long names and aliases    \NC\NR
\NC \type{\rm} \NC serif, regular, roman, rm     \NC\NR
\NC \type{\ss} \NC sans, support, sansserif, ss  \NC\NR
\NC \type{\tt} \NC mono, type, teletype, tt      \NC\NR
\NC \type{\hw} \NC handwritten, hw               \NC\NR
\NC \type{\cg} \NC calligraphic, cg              \NC\NR
\NC --         \NC mm                            \NC\NR
\stoptabulate
\vskip 1ex
\stopbuffer

\placetable
  [here]
  [tab:style switches]
  {Font style switching commands}
{\getbuffer[styleswitch]}

The \quote{handwritten} and \quote{calligraphic} font styles are
sometimes useful when dealing with very elaborate document layout
definitions. In the \CONTEXT\ distribution, only the Lucida font
family uses these styles, in any other font set they are simply
ignored. You could use them in your own font setups if you so desire
(see the next chapter for font setup definitions).

There is a sixth internal style that is only ever referenced as
\quote{mm}. This style handles math fonts. It does not make sense to
use this style directly so there is no command attached to it, but it
is quite important internally so it makes sense to introduce it right
away.

\subsection[font alternative switching]{Font alternative switching}

The alternatives within a style are given in~\in{table}[tab:alternative switches]. 
Not all fonts have both italic and slanted or the bold alternatives of
each. Some other fonts do not have small caps or only one set of
digits.  When an alternative is not known, \CONTEXT\ will attempt to
choose a suitable replacement automatically. For instance, the italic
alternative may be used for if slanted is not available or vice versa.


\startbuffer[alternativeswitch]
\vskip 1ex
\starttabulate[|l|l|]
\NC \type{\bf} \NC bold                          \NC\NR
\NC \type{\sl} \NC slanted                       \NC\NR
\NC \type{\it} \NC italic                        \NC\NR
\NC \type{\bs} \NC boldslanted, slantedbold      \NC\NR
\NC \type{\bi} \NC bolditalic, italicbold        \NC\NR
\NC \type{\sc} \NC smallcaps                     \NC\NR
\NC \type{\os} \NC mediaeval                     \NC\NR
\NC \type{\tf} \NC normal                        \NC\NR
\stoptabulate
\vskip 1ex
\stopbuffer

\placetable
  [here]
  [tab:alternative switches]
  {Font alternative switching commands and their keyword equivalents.
   With \type {\os} we tell \CONTEXT\ that we prefer mediaeval or
   old||style numbers {\os 139} over {\rm 139}.}
{\getbuffer[alternativeswitch]}

Besides these two-letter commands, there is a series of font selector
commands with a suffix attached. Some examples of that are:

\startexample
\starttyping
\tfx \bfx \slx \itx
\tfa \tfb \tfc \tfd \tfxx
\stoptyping
\stopexample

Each of the ordered alphabetic suffixes \type{a}, \type{b}, \dots\
select a somewhat larger actual font than the previous one. The
\type{x} and \type{xx} suffixes select smaller and yet smaller 
versions.


\startbuffer[xalternativeswitch]
\vskip 1ex
\starttabulate[|l|l|]
\NC \type{\bfx} \NC smallbold                           \NC\NR
\NC \type{\slx} \NC smallslanted                        \NC\NR
\NC \type{\itx} \NC smallitalic                         \NC\NR
\NC \type{\bsx} \NC smallboldslanted, smallslantedbold  \NC\NR
\NC \type{\bix} \NC smallbolditalic, smallitalicbold    \NC\NR
\NC \type{\tfx} \NC small, smallnormal                  \NC\NR
\stoptabulate
\vskip 1ex
\stopbuffer

\placetable
  [here]
  [tab:small alternative switches]
  {Small alternative switching commands and their keyword equivalents.}
{\getbuffer[xalternativeswitch]}

Besides the \quote{small} switches that are mentioned 
in~\in{table}[tab:small alternative switches],
it depends on the completeness of the font definition files whether
commands like \type {\ita}, \type {\bfxx}, \type {\bfc}, etc.
are available. For the core \CONTEXT\ fonts, you can count on at least
\type{\tfa}, \type{\tfb}, \type{\tfc}, \type{\tfd}, and \type{\tfxx} 
being defined. For the others, just try and see what happens.

When you have chosen a larger charactersize,
for example \type {\tfb}, then \type {\tf} equals \type {\tfb},
\type {\bf} equals \type {\bfb}, etc. This method is almost always
preferable over returning to the original character size, but it 
may catch you off-guard.

More generic font scaling commands are also available:

\startexample
\starttyping
\tx \txx
\setsmallbodyfont \setbigbodyfont
\stoptyping
\stopexample

The command \type {\tx} adapts itself to both the style and the
alternative. This command is rather handy when one wants to write
macros that act like a chameleon. Going one more step smaller, is
possible too: \type {\txx}. Using \type {\tx} when \type {\tx} is
already given, is equivalent to \type {\txx}.

The commands \type{\setsmallbodyfont} and \type{\setbigbodyfont} switch 
to the \quote{small} and \quote{big} body font sizes. These relative 
sizes are defined via the \quote{body font environment}, 
see~\in{section}[sec:body font environment]. 

The various commands will adapt themselves to the actual
setup of font and size. For example:

\startbuffer
{\rm test {\sl test} {\bf test} \tfc test {\tx test} {\bf test}}
{\ss test {\sl test \tx test} {\bf test \tx test}}
\stopbuffer

\startexample
\typebuffer
\stopexample

will result in:

\startreality
\startlines
\getbuffer
\stoplines
\stopreality

When the \type {\rm} style is active, \CONTEXT\ will interpret the
command \type {\tfd} as if it was \type {\rmd}, when the style
\type{\ss} is active, \type {\tfd} as is treated as \type {\ssd}. 
All default font setups use \type {tf}||setups so they will
automatically adapt to the current font style.

The remainder of this paragraph is for completeness' sake  only.
Use of the following commands in new documents is discouraged.

Frequent font switching leads to longer processing times.
When no sub- or superscripts are used and you are very
certain what font you want to use, you can perform fast font
switches with: \type {\rmsl}, \type {\ssbf}, \type {\tttf},
etc.

The plain \TeX\ compatible font switches 
\type {\vi}, \type {\vii}, \type {\viii}, \type {\ix}, \type {\x}, and 
\type {\xii} are also defined, these have local effects 
like \type{\tfx} and \type{\tfa}. 

\subsection{Switching font styles in setup commands}

A number of \CONTEXT\ commands use the parameter \type {style} to set
the used font.  The parameter mechanism is rather flexible so that 
within the parameter \type {style} you can use any of the font switching 
commands like {\bf} or \type {bf} or \type{\switchtobodyfont}, 
but also a number of keywords like
\startexample
\starttyping
normal  bold  slanted  boldslanted  italic  bolditalic  type
small  smallbold  smallslanted  ...  smallitalic  ...  smalltype
capital
\stoptyping
\stopexample

Most of these keywords have alread been listed in the tables \in{}[tab:alternative switches]
and \in{} [tab:small alternative switches], but a few predefined ones are still missing. 
These are displayed in~\in{table}[tab:last alternative switches], together with the commands
they execute. As is normal in \CONTEXT, you can extend the list of accepted keywords by 
defining your own. This will be  explained in\in~{section}[sec:definealternativestyle] 
in the next chapter.

\startbuffer[lastalternativeswitch]
\vskip 1ex
\starttabulate[|l|l|]
\NC \type{\tt}               \NC type, mono      \NC\NR
\NC \type{\ttx}              \NC smalltype       \NC\NR
\NC \type{\ss}               \NC sans, sansserif \NC\NR
\NC \type{\ss\bf}            \NC sansbold        \NC\NR
\NC \type{\setsmallbodyfont} \NC smallbodyfont   \NC\NR
\NC \type{\setbigbodyfont}   \NC bigbodyfont     \NC\NR
\NC \type{\smallcapped}      \NC cap, capital    \NC\NR
\NC \type{\WORD}             \NC WORD            \NC\NR
\stoptabulate
\vskip 1ex
\stopbuffer

\placetable
  [here]
  [tab:last alternative switches]
  {Remaining font alternative keywords.}
{\getbuffer[lastalternativeswitch]}

\section[emphasize]{Emphasize}
\index{emphasize}
\index{slanted}
\index{italic}
\macro{\tex{em}}

Within most macropackages the command \type {\em} is
available. This command behaves like a chameleon which means
that it will adapt to the actual typeface. In \CONTEXT\
\type {\em} has the following characteristics:

\startitemize[packed]
\item a switch to {\sl slanted} or {\it
      italic} is possible
\item a switch within \type {\bf} results in {\bs bold
      slanted} or {\bi bold italic} (when available)
\item a so called {\em italic correction} is performed
      automatically (\type {\/})
\stopitemize

The bold italic or bold slanted characters are supported only
when \type {\bs} and \type {\bi} are available.

\startbuffer
The mnemonic {\em em} means {\em emphasis}.
{\em The mnemonic {\em em} means {\em emphasis}.}
{\bf The mnemonic {\em em} means {\em emphasis}.}
{\em \bf The mnemonic {\em em} {\em emphasis}.}
{\it The mnemonic em {\em means \bf emphasis}.}
{\sl The mnemonic em {\em means \bf emphasis}.}
\stopbuffer

\startexample
\typebuffer
\stopexample

This results in:

\startlines
\getbuffer
\stoplines

The advantage of the use of \type {\em} over \type {\it}
and|/|or \type {\sl} is that consistent typesetting is
enforced.

By default emphasis is set at {\em slanted}, but in this text
it is set at {\em italic}. This setting is made via 
\type{\setupbodyfontenvironment}, 
see~\in{section}[sec:body font environment] for more details:

\startexample
\starttyping
\setupbodyfontenvironment[default][em=italic]
\stoptyping
\stopexample

\section[capitals]{Capitals}
\index{capital characters}
\index{capitals}
\index{small capitals}
\index{small||caps}
\macro{\tex{setupcapitals}}
\macro{\tex{CAP}}
\macro{\tex{Cap}}
\macro{\tex{cap}}
\macro{\tex{smallcapped}}
\macro{\tex{nocap}}
\macro{\tex{Caps}}
\macro{\tex{Words}}
\macro{\tex{WORDS}}
\macro{\tex{Word}}
\macro{\tex{characters}}

Words and abbreviations can be typeset in capitals. Both
small and big characters are converted into capitals. When
\type {\cap} is used to typeset a capital the size is that
of an \type {\tx}. When we switch to slanted (\type {\sl}),
bold (\type {\bf}), etc. the capital letter will also
change. Since \type {\cap} has a specific meaning in math
mode, the formal implementation is called \type {\smallcapped}.
However in text mode one can use \type {\cap}.

\showsetup{cap}

\showsetup{Cap}

\showsetup{CAP}

\showsetup{Caps}

The first command converts all letters to a capital. We
advise you not to type capital letters in your source file
because real small caps distinguishes between small and big
letters.

\startbuffer
Capitals for \cap {UK} are \cap {OK} and capitals for \cap {USA} are
okay. But what about capitals in \cap {Y2K}.
\stopbuffer

\startexample
\typebuffer
\stopexample

this results in:

\startreality
\getbuffer
\stopreality

A \type {\cap} within a \type {\cap} will not lead to any
problems:

\startbuffer
\cap {People that have gathered their \cap {capital} at the cost of other
people are not seldom \nocap {decapitated} in revolutionary times.}
\stopbuffer

\startexample
\typebuffer
\stopexample

or:

\startreality
\getbuffer
\stopreality

In this example we see that \type {\cap} can be temporarily
revoked by \type {\nocap}.

\showsetup{nocap}

The command \type {\Cap} changes the first character of a
word into a capital and \type {\CAP} changes letters that
are preceded by \type {\\} into capital letters. With \type
{\Caps} you can change the first character of several words
into a capital letter.

\showsetup{setupcapitals}

With this command the capital mechanism can be set up. The
key \type {sc=yes} switches to real {\sc Small Caps}. With
\type {title} we determine whether capitals in titles are
changed.

Next to the former \type {\cap}||commands we have:

\showsetup{Word}

and

\showsetup{Words}

These commands switch the first characters of words into
capitals. All characters in a word are changed with:

\showsetup{WORD}

We end this section with real small capitals. When these are
available the real small caps \type {\sc} are preferred over
the pseudo||capital in abbreviations and logos.

\startbuffer
In a manual on \TeX\ and Con\TeX t  there is always the question whether 
to type \cap{\TeX} and \cap{Con\TeX t} or {\sc \TeX} and {\sc Con\TeX t}. 
Both are defined as a logo in the style definition so we type \type {\TEX} 
and \type {\CONTEXT}, which come out as \TEX\ and \CONTEXT.
\stopbuffer

\startexample
\typebuffer
\stopexample

Results in:

\startreality
\getbuffer
\stopreality

{\sc It is always possible to typeset text in small
capitals. However, realize that lower case characters
discriminate more and make for an easier read.}

An important difference between \type {\cap} and \type {\sc}
is that the last command is used for a specific designed
font type. The command \type {\cap} on the other hand adapts
itself to the actual typeface: {\sl \cap {kap}}, {\bf \cap
{kap}}, {\bs \cap {kap}}, etc.

Some typesetting packages stretch words (inter character
spacing) to reach an acceptable alignment. In \CONTEXT\
this not supported. On purpose! Words in titles can be
stretched by:

\showsetup{stretched}

\startbuffer
\hbox to \hsize {\stretched{there\\is\\much\\stretch\\in ...}}
\hbox to 20em   {\stretched{... and\\here\\somewhat\\less}}
\stopbuffer

\startexample
\typebuffer
\stopexample

With \type {\\} we enforce a space (\type {{}} is also
allowed).

\startreality
\leavevmode\getbuffer
\stopreality

These typographically non permitted actions are only allowed
in heads. The macros that take care of stretching do this
by processing the text character by character.


We will not go into the typographical sins of underlining.
These commands are discussed in \in {section} [underline]
(\over [underline]).


\section[bodyfontswitch]{Selecting bodyfonts}
\index{bodyfont}
\index{font size}
\macro{\tex{setupbodyfont}}
\macro{\tex{switchtobodyfont}}

The bodyfont (main font), font style and size is set up with:

\showsetup{setupbodyfont}

The various identifiers 

In a running text a temporary font switch is done with the
command:

\showsetup{switchtobodyfont}

This command doesn't change the bodyfont in headers and
footers. With \type {small} and \type {big} you switch to a
smaller or larger font.

In most cases, the command \type {\setupbodyfont} is only used once:
in the style definition, and font switching inside the document is
done with \type {\switchtobodyfont}. Don't confuse these two because
that may lead to some rather strange but legitimate effects. 

\subsection{Body font sizes}

Body font sizes actually consist of two components. Of course if you
specify a size it directly specifies the size at which the main font
is loaded, but a number of indirect parameters have to taken care of
as well. Think of things like the font size used in headers, footers,
footnotes, sub|| and superscripts, as well as the interline space and
a few others. 

This is why in \CONTEXT\ there is the concept of a {\em body font
environment} (expressed as a dimension), and that is what you pass as
an argument to \type{\setupbodyfont} or \type{\switchtobodyfont}. The
definitions as presented above use the indication \type{5pt ... 12pt}
for the body font environment, but actually any dimension is
acceptable. 

The most frequently used sizes are predefined as body font
environments: 4pt \dots\ 12pt, 14.4pt, and 17.3pt. But when you use a
different, not-yet-defined size specification |<|for example for a
titlepage|>| \CONTEXT\ will define a body font environment for that
size automatically.  While doing so, \CONTEXT\ normally works with a
precision of 1~decimal to prevent unnecessary loading of fontsizes
with only small size differences.

Be warned that in this case, the results may be a less than ideal. The
reason is that \CONTEXT\ not just has to load the actual font, but it
also has to guess at the various other settings like the relative font
sizes and the interline space.  It does so by using the values from
the nearest smaller body font environment is that is already defined.

You can extend the list of predefined body font environments and even
alter the precision in body font matching. See
the~\in{section}[sec:body font environment] for detailed information about how to
tweak or define your own body font sizes.

\blank

To end this section, the example below demonstrates how the interline
space is adapted automatically, when changing the size of the
bodyfont. Consider this input:

\startbuffer
{\switchtobodyfont[14.4pt] with these commands \par}
{\switchtobodyfont[12pt] for font switching  \par}
{\switchtobodyfont[10pt]  it is possible to   \par}
{\switchtobodyfont[8pt]  produce an eyetest: \par}
{\switchtobodyfont[6pt]  a x c e u i w m q p \par}
\stopbuffer

\startexample
\typebuffer
\stopexample

The actual \CONTEXT\ behaviour is shown below on the left. On the
right you can see what would have happened if the interline space
were not automatically adapted.

\startlinecorrection
\startcombination
  {\vtop{\forgetall\hsize.4\textwidth                \getbuffer}} {}
  {\vtop{\forgetall\hsize.4\textwidth\everybodyfont{}\getbuffer}} {}
\stopcombination
\stoplinecorrection

\subsection{Body font identifiers}

\macro{\tex{usetypescript}}

In the definition block of \type{setupbodyfont} there was a list of
words given besides the special marker \type{IDENTIFIER}. These words
are the symbolic \CONTEXT\ names for the font styles that we ran into
earlier, with a few aliases so that you do not have to worry about the
actual naming convention used. The symbolic names are mapped to
two-letter internal style abbreviations that are used internally,
see~\in{table}[tab:style switches] for an overview.

Although the macro syntax does not say so, you can use two-letter
internal style abbreviations (\type{ss}, \type{rm}) as well as the
longer names, if you prefer.

\blank 

We have seen already that there are other and easier ways to switch the
font style, so if \type{\setupbodyfont} could only be used for this
purpose it would not be all that useful. But luckily there is more:
the optional \type{IDENTIFIER} can be a \quote{body font name} (aka
\quote{typeface}). Such names have to be predefined, perhaps in a font
support file, or simply on earlier lines in the style definition.

A \quote{typeface} is a symbolic name that links a single font style
to actual font families. Such symbolic names are typically grouped
together in a definition block that sets up values that link the four
styles \type{\rm}, \type{\ss}, \type{\tt} and \type{\mm} to fonts in a
\quote{font collection}, and such definition blocks are called
\quote{typescripts}.

\CONTEXT\ expects you to define your own font setups, but there 
are quite a few examples predefined in various typescript files. Not
all of those are perpetually loaded, so you usually have to execute a
typescript explicitly to get the typeface names predefined. To this
end, typescripts {\em themselves\/} also have names. 

Executing a typescript is done by \type{\usetypescript}. We will get
back to \type{\usetypescript} later because it is in fact a very
flexible command, but let's discuss simple usage first.

\showsetup{usetypescript} % empty at the moment

A typical input sequence for selecting the predefined \quote{palatino}
set of typefaces in \MKII\ will look like this:

\starttyping
\usetypescript[palatino][ec]
\setupbodyfont[palatino,12pt]
\stoptyping

In this example the typescript named \type{palatino} is asked for in
the \type{ec} font encoding, and that defines a set of typefaces under
the name \type{palatino}. These are then used by \type{\setupbodyfont}
and eventually this makes \PDFTEX\ load the free Type~1 font URW Palladio
in the correct encoding.  URW Palladio is a font that looks a lot like the
commercial font Linotype Palatino by Hermann Zapf, which explains the
name of the typescript and typefaces.

Font encodings will be handled fully in the~\in{section}[sec:encodings]. 
For now, please take for granted the fact that \PDFTEX\ needs a second 
argument to \type{\usetypescript} that specifies an encoding name, and
that there is a fixed set of acceptable names that depends on the typescript
that is being requested.

In \XETEX\ and \MKIV\ the situation is a little bit different because
fonts are reencoded to match Unicode whenever that is possible. That
in turn means that \XETEX\ and \MKIV\ prefer to use OpenType fonts
over Type~1 fonts, so different typescript definitions are used behind
the scenes, and the second argument to \type{\usetypescript} becomes
optional. 

For example,

\starttyping
\usetypescript[palatino]
\setupbodyfont[palatino,12pt]
\stoptyping

will make \XETEX\ and \LUATEX\ load the OpenType font Pagella. This is
a free font from the \TeX\ Gyre project, that also looks just like the
commercial font Linotype Palatino. You may as well leave the second
argument in place: while it will always be ignored by \LUATEX,
\XETEX\ will actually use that encoding if the typescript uses Type~1
fonts instead of the more modern OpenType or TrueType font formats. 

All predefined typescripts attach meaning to (at least) the three basic
text font styles, so you can e.g. do this:

\starttyping
\usetypescript[times][texnansi]
\setupbodyfont[times,sans,12pt]
\stoptyping

and end up using the OpenType font \TeX\ Gyre Heros or the Type~1 font
URW Nimbus Sans~L. Both fonts are very similar in appearance to
Linotype Helvetica, by the way.

The typescripts that come with the \CONTEXT\ distribution are placed
in source files that have names that start with \type{type-}. Some of
these files are automatically loaded, but most have to be loaded
explicitly. Here is a list

\startbuffer[typefiles]
\begingroup
%\switchtobodyfont[9pt]
\vskip 1ex
\starttabulate[|l|l|l|l|p|]
\NC \bf File   \NC \bf Loaded     \NC \bf Loaded    \NC \bf Loaded   \NC \bf Description \NC \NR
\NC            \NC \bf by \PDFTEX \NC \bf by \XETEX \NC \bf by \MKIV \NC                 \NC \FR
\NC type-akb   \NC no             \NC no            \NC no           \NC PostScript fonts using psnfss names (Type~1)\NC \NR
\NC type-buy   \NC no             \NC no            \NC no           \NC Various commercial fonts (Type~1)\NC \NR
\NC type-cbg   \NC no             \NC no            \NC no           \NC Greek free fonts (Type~1)\NC \NR
\NC type-cow   \NC no             \NC no            \NC no           \NC The \CONTEXT\ cow font (Type~1)\NC \NR
\NC type-exp   \NC no             \NC no            \NC no           \NC Commercial Zapf fonts (OpenType)\NC \NR
\NC type-fsf   \NC no             \NC no            \NC no           \NC Commercial Fontsite 500 fonts (Type~1)\NC \NR
\NC type-ghz   \NC no             \NC no            \NC no           \NC Commercial Zapf fonts (Type~1)\NC \NR
\NC type-gyr   \NC no             \NC no            \NC no           \NC The \TeX\ Gyre project fonts (Type~1)\NC \NR
\NC type-hgz   \NC no             \NC no            \NC no           \NC Commercial Zapf fonts (OpenType)\NC \NR
\NC type-msw   \NC no             \NC no            \NC no           \NC Fonts that come with Microsoft Windows (Type~1)\NC \NR
\NC type-omg   \NC no             \NC no            \NC no           \NC Omega free fonts (Type~1)\NC \NR
\NC type-one   \NC yes            \NC no            \NC no           \NC Various free fonts (Type~1)\NC \NR
\NC type-otf   \NC no             \NC yes           \NC yes          \NC Various free fonts (OpenType)\NC \NR
\NC type-xtx   \NC no             \NC yes           \NC no           \NC Fonts that come with MacOSX (OpenType)\NC \NR
\stoptabulate
\vskip 1ex
\endgroup
\stopbuffer

\getbuffer[typefiles]

Explicit loading one of those files is done via the macro \type{\usetypescriptfile}.
\macro{\tex{usetypescriptfile}}

\startbuffer[typescripts]
\begingroup
\switchtobodyfont[9pt]
\def\*#1{{\bf#1}}
\vskip 1ex
\starttabulate[|l|l|l|l|]
\NC \bf Typescript        \NC \bf Typeface      \NC \bf File           \NC \bf Encodings                     \NC \FR
\NC OmegaArab             \NC omarb             \NC type-omg           \NC (unspecified)                     \NC \NR
\NC OmegaLGC              \NC omlgc             \NC type-omg           \NC (unspecified)                     \NC \NR
\NC antykwa-torunska      \NC antykwa           \NC type-one, type-otf \NC texnansi,ec,8r,t2a                \NC \NR
\NC cbgreek               \NC cbgreek           \NC type-cbg           \NC (unspecified)                     \NC \NR
\NC cbgreek-all           \NC cbgreek-all       \NC type-cbg           \NC (unspecified)                     \NC \NR
\NC cbgreek-medium        \NC cbgreek-medium    \NC type-cbg           \NC (unspecified)                     \NC \NR
\NC cow                   \NC cow               \NC type-cow           \NC default                           \NC \NR
\NC fourier               \NC fourier           \NC type-one           \NC ec                                \NC \NR
\NC iwona                 \NC iwona             \NC type-one, type-otf \NC texnansi,ec,8r,t2a                \NC \NR
\NC iwona-heavy           \NC iwona-heavy       \NC type-one, type-otf \NC texnansi,ec,8r,t2a                \NC \NR
\NC iwona-light           \NC iwona-light       \NC type-one, type-otf \NC texnansi,ec,8r,t2a                \NC \NR
\NC iwona-medium          \NC iwona-medium      \NC type-one, type-otf \NC texnansi,ec,8r,t2a                \NC \NR
\NC \*{lucida}            \NC lucida            \NC type-buy           \NC texnansi,ec,8r                    \NC \NR
\NC \*{lucidabfm}         \NC lucida            \NC type-buy           \NC texnansi,ec,8r                    \NC \NR
\NC \*{lucidabfm}         \NC lucidabfm         \NC type-buy           \NC texnansi,ec,8r                    \NC \NR
\NC \*{lucidaboldmath}    \NC lucida            \NC type-buy           \NC texnansi,ec,8r                    \NC \NR
\NC \*{lucidaboldmath}    \NC lucidaboldmath    \NC type-buy           \NC texnansi,ec,8r                    \NC \NR
\NC modern                \NC modern            \NC type-one, type-otf \NC texnansi,ec,qx,t5,default         \NC \NR
\NC modern-base           \NC modern            \NC type-one, type-otf \NC texnansi,ec,qx,t5,default,t2a/b/c \NC \NR
\NC modernvariable        \NC modernvariable    \NC type-one, type-otf \NC texnansi,ec,qx,8r,t5              \NC \NR
\NC \*{optima}            \NC optima            \NC type-one           \NC texnansi,ec,qx                    \NC \NR
\NC \*{optima}            \NC optima            \NC type-ghz           \NC texnansi,ec,qx                    \NC \NR
\NC \*{optima-nova}       \NC optima            \NC type-ghz, type-hgz \NC texnansi,ec                       \NC \NR
\NC \*{optima-nova-os}    \NC optima-os         \NC type-ghz, type-hgz \NC texnansi,ec                       \NC \NR
\NC \*{palatino}          \NC palatino          \NC type-hgz           \NC (cannot be used in \MKII)         \NC \NR
\NC \*{palatino}          \NC palatino          \NC type-one, type-otf \NC texnansi,ec,qx,8r,t5              \NC \NR
\NC \*{palatino-informal} \NC palatino-informal \NC type-hgz           \NC (cannot be used in \MKII)         \NC \NR
\NC \*{palatino-light}    \NC palatino-light    \NC type-exp           \NC (cannot be used in \MKII)         \NC \NR
\NC \*{palatino-medium}   \NC palatino-medium   \NC type-exp           \NC (cannot be used in \MKII)         \NC \NR
\NC \*{palatino-normal}   \NC palatino-normal   \NC type-exp           \NC (cannot be used in \MKII)         \NC \NR
\NC \*{palatino-nova}     \NC palatino          \NC type-hgz           \NC (cannot be used in \MKII)         \NC \NR
\NC \*{palatino-sans}     \NC palatino          \NC type-hgz           \NC (cannot be used in \MKII)         \NC \NR
\NC postscript            \NC postscript        \NC type-one, type-otf \NC texnansi,ec,qx,8r,t5              \NC \NR
\NC sheep                 \NC sheep             \NC type-cow           \NC default                           \NC \NR
\NC times                 \NC times             \NC type-one, type-otf \NC texnansi,ec,qx,8r,t5              \NC \NR
\stoptabulate
\vskip 1ex
\endgroup
\stopbuffer

\placetable
  [page]
  [tab:typescripts and typefaces]
  {The typescripts. Typescripts that use commercial fonts are typeset in bold. }
  {\getbuffer[typescripts]}

The predefined typescripts, the typefaces they define, the files
they are contained in inside the \CONTEXT\ distribution, and the
encodings they support in \MKII\ mode are listed in~\in {table}
[tab:typescripts and typefaces]. In the following section there is a 
table (\in {}[tab:typeface names]) that explains for each typescript 
what font set it attaches to each of the font styles.

\showsetup{usetypescriptfile} % empty at the moment

For example, the following 
\starttyping
\usetypescriptfile[type-buy]
\usetypescript[lucida][texnansi]
\setupbodyfont[lucida,12pt]
\stoptyping

will make \PDFTEX\ use the Lucida Bright font family. Because this is a commercial 
font, this only works correctly if you have actually bought and installed the fonts. 
This uses the \type{texnansi} encoding because that is the preferred encoding of the 
actual fonts.

This is a good moment to explain a little trick: because the various \type{type-xxx}
files define the building blocks for typescripts as well as the actual typescripts, 
it is sometimes possible to alter the effect of a typescript by
loading an extra typescript file. For example,

\starttyping
\usetypescriptfile[type-gyr]
\usetypescript[palatino][ec]
\setupbodyfont[palatino,12pt]
\stoptyping

will result in \PDFTEX\ using the Type~1 font Pagella from the \TeX\ Gyre project instead 
of the older and less complete URW Palladio, because the definition of the building blocks
for the \type{palatino} typescript that is in the \type{type-gyr} file overwrites the 
preloaded definition from the \type{type-one} file.

Two of the files in the \CONTEXT\ distribution exist precisely for this reason: 
\startitemize[packed]
\sym {\type{type-gyr.tex}} 

maps the typical PostScript font names for the free URW fonts 
to the \TeX\ Gyre set;
\sym {\type{type-akb.tex}} 

maps the same names to the commercial Adobe fonts. 
\stopitemize
For the defintions in the second file to work, you also need to execute an extra typescript:

\starttyping
\usetypescriptfile[type-akb]
\usetypescript[adobekb][ec]
\usetypescript[palatino][ec]
\setupbodyfont[palatino,12pt]
\stoptyping

\subsection{Typeface definitions}

\macro{\tex{starttypescript}}
\macro{\tex{definetypeface}}

Defining a typeface goes like this:

\starttyping
\starttypescript [palatino] [texnansi,ec,qx,t5,default]

\definetypeface[palatino] [rm] [serif] [palatino] [default]
\definetypeface[palatino] [ss] [sans]  [modern]   [default] [rscale=1.075]
\definetypeface[palatino] [tt] [mono]  [modern]   [default] [rscale=1.075]
\definetypeface[palatino] [mm] [math]  [palatino] [default]

\stoptypescript
\stoptyping

This defines a typescript named \type{palatino} in five different encodings.
When this typescript is executed via \type{\usetypescript}, it will define
four typefaces, one of each of the four basic styles \type{rm}, \type{ss}, \type{tt}, and \type{mm}. 

\showsetup{definetypeface} % empty at the moment

The third and fourth arguments to \type{\definetypeface} are pointers to already
declared font sets, these are defined elsewhere. \in{Table}[tab:typeface names] 
gives the full list of predefined typescripts (the first argument of \type{\starttypescript}) 
and font sets  that are attached to the styles (the third and fourth argument of 
each \type{\definetypeface}). 

The names in the third argument (like \type{serif} and \type{sans}) do {\em not\/} have the
same meaning as the names used in \type{\setupbodyfont}. Inside \type{\setupbodyfont}, they
were keywords that were internally remapped to one of the two-letter internal styles. Inside
\type{\definetypeface}, they are nothing more than convenience names that are  attached to a 
group of fonts by the person that wrote the font definition. They only reflect a grouping
that the person believed that could be a single font style.  Oftentimes, these names are
identical to the official style keywords, just as the typescript and typeface names are often 
the same, but there can be (and are) different names altogether.

\startbuffer[simpletypescripts]
\vskip 1ex
\begingroup
\switchtobodyfont[9pt]
\starttabulate[|l||l|l|l|l|]
\NC {\bf Typescript  }\NC {\bf Style rm    }  \NC {\bf Style ss }      \NC {\bf Style tt}     \NC  {\bf Style mm }  \NC \FR
\NC OmegaArab         \NC omega naskh         \NC --                   \NC --                 \NC --                \NC \NR
\NC OmegaLGC          \NC omega               \NC --                   \NC omega              \NC --                \NC \NR
\NC antykwa-torunska  \NC antykwa-torunska    \NC modern               \NC modern             \NC antykwa-torunska  \NC \NR
\NC cbgreek           \NC cbgreek             \NC cbgreek              \NC cbgreek            \NC --                \NC \NR
\NC cbgreek-all       \NC cbgreek             \NC cbgreek              \NC cbgreek            \NC --                \NC \NR
\NC cbgreek-medium    \NC cbgreek             \NC cbgreek              \NC cbgreek            \NC --                \NC \NR
\NC cow               \NC cow                 \NC cow serif            \NC modern             \NC cow               \NC \NR
\NC fallback          \NC modern              \NC modern               \NC modern             \NC modern            \NC \NR
\NC fourier           \NC fourier             \NC modern               \NC modern             \NC fourier           \NC \NR
\NC iwona             \NC modern              \NC iwona                \NC modern             \NC iwona             \NC \NR
\NC iwona-heavy       \NC modern              \NC iwona-heavy          \NC modern             \NC iwona-heavy       \NC \NR
\NC iwona-light       \NC modern              \NC iwona-light          \NC modern             \NC iwona-light       \NC \NR
\NC iwona-medium      \NC modern              \NC iwona-medium         \NC modern             \NC iwona-medium      \NC \NR
\NC lucida            \NC lucida              \NC lucida               \NC lucida             \NC lucida            \NC \NR
\NC lucidabfm         \NC lucida              \NC lucida               \NC lucida             \NC lucida bfmath     \NC \NR
\NC lucidaboldmath    \NC lucida              \NC lucida               \NC lucida             \NC lucida boldmath   \NC \NR
\NC modern            \NC modern              \NC modern               \NC modern             \NC modern            \NC \NR
\NC modern-base       \NC (computer-)modern   \NC (computer-)modern    \NC (computer-)modern  \NC (computer-)modern \NC \NR
\NC modernvariable    \NC simple              \NC modern               \NC modern             \NC modern            \NC \NR
\NC optima            \NC palatino            \NC optima-nova          \NC modern             \NC palatino          \NC \NR
\NC optima-nova       \NC optima-nova sans    \NC optima-nova          \NC latin-modern       \NC latin-modern      \NC \NR
\NC optima-nova-os    \NC optima-nova-os sans \NC optima-nova-os       \NC latin-modern       \NC latin-modern      \NC \NR
\NC palatino          \NC palatino-nova       \NC palatino-sans        \NC latin-modern       \NC latin-modern      \NC \NR
\NC palatino          \NC palatino            \NC modern               \NC modern             \NC palatino          \NC \NR
\NC palatino-informal \NC palatino-nova       \NC palatino-informal    \NC latin-modern       \NC latin-modern      \NC \NR
\NC palatino-light    \NC palatino-nova       \NC palatino-sans-light  \NC latin-modern       \NC latin-modern      \NC \NR
\NC palatino-medium   \NC palatino-nova       \NC palatino-sans-medium \NC latin-modern       \NC latin-modern      \NC \NR
\NC palatino-normal   \NC palatino-nova       \NC palatino-sans-normal \NC latin-modern       \NC latin-modern      \NC \NR
\NC palatino-nova     \NC palatino-nova       \NC palatino-sans        \NC latin-modern       \NC latin-modern      \NC \NR
\NC palatino-sans     \NC palatino-nova       \NC palatino-sans        \NC latin-modern       \NC latin-modern      \NC \NR
\NC postscript        \NC times               \NC helvetica            \NC courier            \NC times             \NC \NR
\NC sheep             \NC sheep               \NC sheep serif          \NC modern             \NC sheep             \NC \NR
\NC times             \NC times               \NC helvetica            \NC modern             \NC times             \NC \NR
\stoptabulate
\endgroup
\vskip 1ex
\stopbuffer

\placetable
  [here]
  [tab:typeface names]
  {The typescripts.\crlf 
   Unless stated otherwise, style {\bf rm} uses a group named serif, style {\bf ss} uses sans, style {\bf tt} uses
   mono, and style {\bf mm} uses math.
   A single dash in a cell means that the typescript does not define that style, you should refrain from using the style.
   The lucida, lucidabfm, and lucidaboldmath typescripts also define {\bf hw} and {\bf cg} as \quote{lucida handwring} 
   and \quote{lucida calligraphy}.
   The modern-base typescript switches back to computer-modern for a few legacy encodings: t2a, t2b, and t2c.}
  {\getbuffer[simpletypescripts]}

How to define your own font sets will be explained in the next chapter,
but there are quite a few predefined font sets that come with \CONTEXT;
these are all listed in the four tables~\in{}[tab:body font names 1],
\in{}[tab:body font names 2], \in{}[tab:body font names 3], 
and \in{}[tab:body font names 4]. 

For everything to work properly in \MKII, the predefined font sets also have to have an
encoding attached, you can look those up in the relevant tables as well. 

The fifth argument to \type{\definetypeface} specifies specific font size setups (if any), 
these will be covered in~\in{section}[typefacesizes] in the next chapter. Almost always,
specifying \type{default} will suffice.

The optional sixth argument is used for tweaking font settings like the specification of
font features or adjusting parameters. In this case, the two \type{modern} font sets are
loaded with a small magnification, this evens out the visual heights of the font styles.

\startbuffer
\vskip 1ex
\starttabulate[|lT|l|p|]
\NC \rm\bf key \NC \bf default value        \NC explanation                             \NC \FR
\NC rscale   \NC 1                       \NC a scaling factor for this typescript
                                             relative to the selected body font size \NC \NR
\NC encoding \NC \type{\defaultencoding} \NC the encoding for the typeface, normally
                                             inherited from the typescript
                                             automatically                           \NC \NR
\NC features \NC                         \NC this applies a predefined font feature set 
                                             (see~\in{section}[sec:font features])   \NC \NR
\NC text     \NC                         \NC sets up the forced math text style      \NC \NR
\stoptabulate 
\vskip 1ex
\stopbuffer


There are four possible keys in the sixth argument:

\getbuffer

A note for the lazy: if the sixth argument is not given and the fifth argument happens
to be \type{default}, then the fifth argument can be omitted as well.

\startbuffer[bodyfontst1free]
\switchtobodyfont[9pt]
\starttabulate[|l|l|l|p(3.5cm)|]
\NC \bf Identifier             \NC \bf file  \NC \bf Encodings               \NC \bf Supported styles \NC \FR
\NC modern                     \NC type-one  \NC ec, qx, texnansi, t5        \NC serif, sans, mono, math, \crlf
                                                                                 boldmath, bfmath \NC \NR 
\NC latin-modern               \NC type-one  \NC ec, qx, texnansi, t5        \NC serif, sans, mono, math, \crlf 
                                                                                 boldmath, bfmath \NC \NR 
\NC computer-modern            \NC type-one  \NC t2a/b/c                     \NC serif, sans, mono, math, \crlf %removed lcy,cyr,x2
                                                                                 boldmath, bfmath \NC \NR 
\NC simple                     \NC type-one  \NC -- synonyms only --         \NC serif \NC \NR 
\NC concrete                   \NC type-one  \NC -- hardcoded --             \NC serif \NC \NR
\NC euler                      \NC type-one  \NC -- hardcoded --             \NC math, boldmath, bfmath\NC \NR
\NC ams                        \NC type-one  \NC -- hardcoded --             \NC math\NC \NR
\NC fourier                    \NC type-one  \NC ec                          \NC math, serif \NC \NR
\NC courier                    \NC type-one  \NC 8r, ec, qx, texnansi, t5    \NC mono \NC \NR
\NC helvetica                  \NC type-one  \NC 8r, ec, qx, texnansi, t5    \NC sans \NC \NR
\NC times                      \NC type-one  \NC 8r, ec, qx, texnansi, t5    \NC serif, math \NC \NR
\NC palatino                   \NC type-one  \NC 8r, ec, qx, texnansi, t5    \NC serif, math \NC \NR
\NC bookman                    \NC type-one  \NC 8r, ec, qx, texnansi, t5    \NC serif \NC \NR
\NC schoolbook                 \NC type-one  \NC 8r, ec, texnansi, t5        \NC serif \NC \NR
\NC chancery                   \NC type-one  \NC 8r, ec, qx, texnansi        \NC calligraphy \NC \NR
\NC charter                    \NC type-one  \NC 8r, ec, texnansi            \NC serif \NC \NR
\NC utopia                     \NC type-one  \NC ec, texnansi                \NC serif \NC \NR
\NC antykwa-torunska           \NC type-one  \NC ec, qx, texnansi, t5, t2a/b/c, greek \NC serif, math \NR
\NC antykwa-torunska-light     \NC type-one  \NC ec, qx, texnansi, t5, t2a/b/c, greek \NC serif, math \NR
\NC antykwa-torunska-cond      \NC type-one  \NC ec, qx, texnansi, t5, t2a/b/c, greek \NC serif, math \NR
\NC antykwa-torunska-lightcond \NC type-one  \NC ec, qx, texnansi, t5, t2a/b/c, greek \NC serif, math \NR
\NC antykwa-poltawskiego       \NC type-one  \NC 8r, ec, texnansi                   \NC serif \NR
\NC iwona                      \NC type-one  \NC ec, qx, texnansi, t5               \NC sans, math \NC \NR
\NC iwona-light                \NC type-one  \NC ec, qx, texnansi, t5               \NC sans, math \NC \NR
\NC iwona-medium               \NC type-one  \NC ec, qx, texnansi, t5               \NC sans, math \NC \NR
\NC iwona-heavy                \NC type-one  \NC ec, qx, texnansi, t5               \NC sans, math \NC \NR
\NC iwona-cond                 \NC type-one  \NC ec, qx, texnansi, t5               \NC sans \NC \NR
\NC iwona-light-cond           \NC type-one  \NC ec, qx, texnansi, t5               \NC sans \NC \NR
\NC iwona-medium-cond          \NC type-one  \NC ec, qx, texnansi, t5               \NC sans \NC \NR
\NC iwona-heavy-cond           \NC type-one  \NC ec, qx, texnansi, t5               \NC sans \NC \NR
\NC kurier                     \NC type-one  \NC ec, qx, texnansi, t5               \NC sans, math \NC \NR
\NC kurier-light               \NC type-one  \NC ec, qx, texnansi, t5               \NC sans, math \NC \NR
\NC kurier-medium              \NC type-one  \NC ec, qx, texnansi, t5               \NC sans, math \NC \NR
\NC pagella                    \NC type-gyr  \NC ec, qx, texnansi, t5, t2a/b/c      \NC serif\NC \NR % removed encs: rm,el, ec, cs, l7x
\NC palatino                   \NC type-gyr  \NC ec, qx, texnansi, t5, t2a/b/c      \NC serif\NC \NR
\NC termes                     \NC type-gyr  \NC ec, qx, texnansi, t5, t2a/b/c      \NC serif\NC \NR
\NC times                      \NC type-gyr  \NC ec, qx, texnansi, t5, t2a/b/c      \NC serif\NC \NR
\NC bonum                      \NC type-gyr  \NC ec, qx, texnansi, t5, t2a/b/c      \NC serif\NC \NR
\NC bookman                    \NC type-gyr  \NC ec, qx, texnansi, t5, t2a/b/c      \NC serif\NC \NR
\NC schola                     \NC type-gyr  \NC ec, qx, texnansi, t5, t2a/b/c      \NC serif\NC \NR
\NC schoolbook                 \NC type-gyr  \NC ec, qx, texnansi, t5, t2a/b/c      \NC serif\NC \NR
\NC heros                      \NC type-gyr  \NC ec, qx, texnansi, t5, t2a/b/c      \NC sans\NC \NR
\NC helvetica                  \NC type-gyr  \NC ec, qx, texnansi, t5, t2a/b/c      \NC sans\NC \NR
\NC adventor                   \NC type-gyr  \NC ec, qx, texnansi, t5, t2a/b/c      \NC sans\NC \NR
\NC cursor                     \NC type-gyr  \NC ec, qx, texnansi, t5, t2a/b/c      \NC mono\NC \NR
\NC courier                    \NC type-gyr  \NC ec, qx, texnansi, t5, t2a/b/c      \NC mono\NC \NR
\NC omega                      \NC type-omg  \NC -- hardcoded --                    \NC naskh, serif, mono\NC \NR
\NC cbgreek                    \NC type-cbg  \NC -- hardcoded --                    \NC serif, sans, mono \NC \NR
\NC cbgreek-medium             \NC type-cbg  \NC -- hardcoded --                    \NC serif, sans, mono \NC \NR
\NC cbgreek-all                \NC type-cbg  \NC -- hardcoded --                    \NC serif, sans, mono \NC \NR
\NC cow                        \NC type-cow  \NC -- hardcoded --                    \NC math, serif \NC \NR
\NC sheep                      \NC type-cow  \NC -- hardcoded --                    \NC math, serif \NC \NR

\stoptabulate
\stopbuffer

%\NC Identifier           \NC Needed font package              
%\NC modern               \NC Latin Modern              \NC \NR 
%\NC latin-modern         \NC Latin Modern              \NC \NR 
%\NC computer-modern      \NC Latin Modern              \NC \NR 
%\NC simple               \NC Latin Modern              \NC \NR 
%\NC concrete             \NC -- MF bitmaps --          \NC \NR
%\NC euler                \NC Euler                     \NC \NR
%\NC ams                  \NC AMS Symbols               \NC \NR
%\NC fourier              \NC Fourier                   \NC \NR
%\NC courier              \NC URW PostScript (or Adobe) \NC \NR
%\NC helvetica            \NC URW PostScript (or Adobe) \NC \NR
%\NC times                \NC URW PostScript (or Adobe) \NC \NR
%\NC palatino             \NC URW PostScript (or Adobe) \NC \NR
%\NC bookman              \NC URW PostScript (or Adobe) \NC \NR
%\NC schoolbook           \NC URW PostScript (or Adobe) \NC \NR
%\NC chancery             \NC URW PostScript (or Adobe) \NC \NR
%\NC charter              \NC Bitstream Charter         \NC \NR
%\NC utopia               \NC Adobe Utopia              \NC \NR
%\NC antykwa-torunska-xx  \NC Antykwa Torunska          \NC \NR
%\NC antykwa-poltawskiego \NC Antykwa Poltawskiego      \NC \NR
%\NC iwona-xx             \NC Iwona                     \NC \NR
%\NC kurier-xx            \NC Kurier                    \NC \NR
%\NC pagella              \NC TeX Gyre                  \NC \NR
%\NC palatino             \NC TeX Gyre                  \NC \NR
%\NC termes               \NC TeX Gyre                  \NC \NR
%\NC times                \NC TeX Gyre                  \NC \NR
%\NC bonum                \NC TeX Gyre                  \NC \NR
%\NC bookman              \NC TeX Gyre                  \NC \NR
%\NC schola               \NC TeX Gyre                  \NC \NR
%\NC schoolbook           \NC TeX Gyre                  \NC \NR
%\NC heros                \NC TeX Gyre                  \NC \NR
%\NC helvetica            \NC TeX Gyre                  \NC \NR
%\NC adventor             \NC TeX Gyre                  \NC \NR
%\NC cursor               \NC TeX Gyre                  \NC \NR
%\NC courier              \NC TeX Gyre                  \NC \NR
%\NC omega                \NC Omega fonts               \NC \NR
%\NC cbgreek-xx           \NC cbgreek                   \NC \NR
%\NC cow                  \NC \CONTEXT\ cow font        \NC \NR
%\NC sheep                \NC \CONTEXT\ cow font        \NC \NR


\startbuffer[bodyfontst1buy]
\switchtobodyfont[9pt]
\starttabulate[|l|l|l|p(4.5cm)|]
\NC \bf Identifier       \NC \bf file  \NC \bf Encodings      \NC \bf Supported styles \NC \FR
\NC lucida               \NC type-buy  \NC 8r, ec, texnansi   \NC serif, sans, mono, handwriting,\crlf 
                                                                  calligraphy, math, boldmath, \crlf
                                                                  bfmath, casual, fax \NC \NR
\NC informal             \NC type-buy \NC -- hardcoded --     \NC casual, math\NC \NR
\NC officina             \NC type-buy \NC 8r, ec, texnansi    \NC serif, sans\NC \NR
\NC meta                 \NC type-buy \NC 8r, ec, texnansi    \NC serif, sans, expert \NC \NR
\NC meta-medium          \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-lf              \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-book            \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-book-lf         \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-bold            \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-bold-lf         \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-normal          \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-normal-lf       \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-medium          \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-medium-lf       \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-black           \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-black-lf        \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC univers              \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC univers-light        \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC univers-black        \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC mendoza              \NC type-buy \NC 8r, ec, texnansi    \NC serif \NC \NR
\NC frutiger             \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC kabel                \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC thesans              \NC type-buy \NC 8r, ec, texnansi    \NC sans, mono, expert \NC \NR
\NC sabon                \NC type-buy \NC 8r, ec, texnansi    \NC serif \NC \NR
\NC stone                \NC type-buy \NC ec, texnansi        \NC serif, sans \NC \NR
\NC stone-oldstyle       \NC type-buy \NC -- synonyms only -- \NC serif, sans \NC \NR
\NC industria            \NC type-buy \NC ec, texnansi        \NC sans \NC \NR
\NC bauhaus              \NC type-buy \NC ec, texnansi        \NC sans \NC \NR
\NC swift                \NC type-buy \NC ec, texnansi        \NC serif \NC \NR
\NC swift-light          \NC type-buy \NC -- synonyms only -- \NC serif \NC \NR
\NC syntax               \NC type-buy \NC ec, texnansi        \NC sans \NC \NR
\NC linoletter           \NC type-buy \NC ec, texnansi        \NC serif \NC \NR
\NC zapfino              \NC type-ghz \NC 8r, ec, texnansi    \NC serif, handwriting\NC \NR
\NC palatino-sans-light  \NC type-exp \NC texnansi, ec        \NC sans\NC \NR
\NC palatino-sans-normal \NC type-exp \NC texnansi, ec        \NC sans\NC \NR
\NC palatino-sans-medium \NC type-exp \NC texnansi, ec        \NC sans\NC \NR
\NC opus                 \NC type-fsf \NC 8r, ec, texnansi    \NC sans\NC \NR
\NC typewriter           \NC type-fsf \NC 8r, ec, texnansi    \NC mono\NC \NR
\NC garamond             \NC type-fsf \NC 8r, ec, texnansi    \NC serif\NC \NR
\NC optima               \NC type-ghz \NC 8r, ec, texnansi    \NC sans\NC \NR
\NC optima-nova          \NC type-ghz \NC 8r, ec, texnansi    \NC sans\NC \NR
\NC optima-nova-os       \NC type-ghz \NC 8r, ec, texnansi    \NC sans\NC \NR
\NC optima-nova-light    \NC type-ghz \NC 8r, ec, texnansi    \NC sans\NC \NR
\NC optima-nova-medium   \NC type-ghz \NC 8r, ec, texnansi    \NC sans\NC \NR
\NC palatino             \NC type-ghz \NC 8r, ec, texnansi    \NC serif\NC \NR
\NC palatino-nova        \NC type-ghz \NC 8r, ec, texnansi    \NC serif\NC \NR
\NC palatino-nova-os     \NC type-ghz \NC 8r, ec, texnansi    \NC serif\NC \NR
\NC palatino-nova-light  \NC type-ghz \NC 8r, ec, texnansi    \NC serif\NC \NR
\NC palatino-nova-medium \NC type-ghz \NC 8r, ec, texnansi    \NC serif\NC \NR
\NC aldus-nova           \NC type-ghz \NC 8r, ec, texnansi    \NC serif\NC \NR
\NC melior               \NC type-ghz \NC 8r, ec, texnansi    \NC serif\NC \NR
\NC verdana              \NC type-msw \NC texnansi            \NC sans\NC \NR
\NC arial                \NC type-msw \NC texnansi            \NC sans\NC \NR
\stoptabulate									         
\stopbuffer									         

%\NC Identifier           \NC Needed font package    \NC \NR
%\NC lucida               \NC Lucida (Y\&Y, TUG)     \NC \NR
%\NC informal             \NC Micropress Informal    \NC \NR
%\NC officina             \NC ITC Officina           \NC \NR
%\NC meta-xx              \NC FF Meta                \NC \NR
%\NC univers-xx           \NC Linotype Univers       \NC \NR
%\NC mendoza              \NC Mendoza                \NC \NR
%\NC frutiger             \NC Frutiger               \NC \NR
%\NC kabel                \NC ITC Kabel              \NC \NR
%\NC thesans              \NC FF The Sans            \NC \NR
%\NC sabon                \NC Monotype Sabon         \NC \NR
%\NC stone-xx             \NC ITC Stone              \NC \NR
%\NC industria            \NC Linotype Industria     \NC \NR
%\NC bauhaus              \NC ITC Bauhaus            \NC \NR
%\NC swift                \NC EF Swift               \NC \NR
%\NC swift-light          \NC EF Swift               \NC \NR
%\NC syntax               \NC Linotype Syntax        \NC \NR
%\NC linoletter           \NC Linotype Linoletter    \NC \NR
%\NC zapfino              \NC ZapfinoT1              \NC \NR
%\NC palatino-sans-xx     \NC Palatino Sans Nova T1  \NC \NR
%\NC opus                 \NC Fontsite 500 Opus      \NC \NR
%\NC typewriter           \NC Fontsite 500 Typewriter\NC \NR
%\NC garamond             \NC Fontsite 500 Garamond  \NC \NR
%\NC optima-xx            \NC Optima Nova T1         \NC \NR
%\NC palatino-xx          \NC Palatino Nova T1       \NC \NR
%\NC aldus-nova           \NC Aldus Nova T1          \NC \NR
%\NC melior               \NC Melior T1              \NC \NR
%\NC verdana              \NC Microsoft Windows      \NC \NR
%\NC arial                \NC Microsoft Windows      \NC \NR


\startbuffer[bodyfontsotffree]
\switchtobodyfont[9pt]
\starttabulate[|l|l|l|]
\NC \bf Identifier             \NC \bf file \NC \bf Supported styles \NC \FR
\NC modern                     \NC type-otf \NC serif, sans, mono, math, boldmath, bfmath \NC \NR 
\NC latin-modern               \NC type-otf \NC serif, sans, mono, math, boldmath, bfmath \NC \NR 
\NC modern-vari                \NC type-otf \NC mono \NC \NR 
\NC latin-modern-vari          \NC type-otf \NC mono \NC \NR 
\NC modern-cond                \NC type-otf \NC mono \NC \NR 
\NC latin-modern-cond          \NC type-otf \NC mono \NC \NR 
\NC computer-modern            \NC type-otf \NC serif, sans, mono, math, boldmath, bfmath \NC \NR 
\NC concrete                   \NC type-otf \NC serif \NC \NR
\NC euler                      \NC type-otf \NC math, boldmath, bfmath\NC \NR
\NC ams                        \NC type-otf \NC math \NC \NR
\NC pagella                    \NC type-otf \NC serif \NC \NR
\NC termes                     \NC type-otf \NC serif \NC \NR
\NC bonum                      \NC type-otf \NC serif \NC \NR
\NC schola                     \NC type-otf \NC serif \NC \NR
\NC chorus                     \NC type-otf \NC serif \NC \NR
\NC heros                      \NC type-otf \NC sans \NC \NR
\NC adventor                   \NC type-otf \NC sans \NC \NR
\NC cursor                     \NC type-otf \NC sans \NC \NR
\NC palatino                   \NC type-otf \NC serif, math \NC \NR
\NC times                      \NC type-otf \NC serif, math \NC \NR
\NC bookman                    \NC type-otf \NC serif \NC \NR
\NC schoolbook                 \NC type-otf \NC serif \NC \NR
\NC chancery                   \NC type-otf \NC calligraphy \NC \NR
\NC helvetica                  \NC type-otf \NC sans \NC \NR
\NC courier                    \NC type-otf \NC mono \NC \NR
\NC antykwa-torunska           \NC type-otf \NC serif, math \NC \NR
\NC antykwa-torunska-light     \NC type-otf \NC serif, math \NC \NR
\NC antykwa-torunska-cond      \NC type-otf \NC serif, math \NC \NR
\NC antykwa-torunska-lightcond \NC type-otf \NC serif, math \NC \NR
\NC antykwa-poltawskiego       \NC type-otf \NC serif \NC \NR
\NC iwona-light                \NC type-otf \NC sans, math \NC \NR
\NC iwona                      \NC type-otf \NC sans, math \NC \NR
\NC iwona-medium               \NC type-otf \NC sans, math \NC \NR
\NC iwona-heavy                \NC type-otf \NC sans, math \NC \NR
\NC iwona-cond                 \NC type-otf \NC sans \NC \NR
\NC iwona-light-cond           \NC type-otf \NC sans \NC \NR
\NC iwona-medium-cond          \NC type-otf \NC sans \NC \NR
\NC iwona-heavy-cond           \NC type-otf \NC sans \NC \NR
\NC kurier                     \NC type-otf \NC sans, math \NC \NR
\NC kurier-light               \NC type-otf \NC sans, math \NC \NR
\NC kurier-medium              \NC type-otf \NC sans, math \NC \NR
\NC charter                    \NC type-otf \NC serif \NC \NR
\NC gentium                    \NC type-xtx \NC serif \NC \NR
\stoptabulate
\stopbuffer

%\NC Identifier                 \NC Needed font package    \NC \NR
%\NC modern                     \NC Latin Modern           \NC \NR
%\NC latin-modern               \NC Latin Modern           \NC \NR
%\NC modern-vari                \NC Latin Modern           \NC \NR
%\NC latin-modern-vari          \NC Latin Modern           \NC \NR
%\NC modern-cond                \NC Latin Modern           \NC \NR
%\NC latin-modern-cond          \NC Latin Modern           \NC \NR
%\NC computer-modern            \NC Latin Modern           \NC \NR
%\NC concrete                   \NC -- MF bitmaps --       \NC \NR
%\NC euler                      \NC Euler                  \NC \NR
%\NC ams                        \NC AMS                    \NC \NR
%\NC pagella                    \NC TeX Gyre               \NC \NR
%\NC termes                     \NC TeX Gyre               \NC \NR
%\NC bonum                      \NC TeX Gyre               \NC \NR
%\NC schola                     \NC TeX Gyre               \NC \NR
%\NC chorus                     \NC TeX Gyre               \NC \NR
%\NC heros                      \NC TeX Gyre               \NC \NR
%\NC adventor                   \NC TeX Gyre               \NC \NR
%\NC cursor                     \NC TeX Gyre               \NC \NR
%\NC palatino                   \NC TeX Gyre               \NC \NR
%\NC times                      \NC TeX Gyre               \NC \NR
%\NC bookman                    \NC TeX Gyre               \NC \NR
%\NC schoolbook                 \NC TeX Gyre               \NC \NR
%\NC chancery                   \NC TeX Gyre               \NC \NR
%\NC helvetica                  \NC TeX Gyre               \NC \NR
%\NC courier                    \NC TeX Gyre               \NC \NR
%\NC antykwa-torunska           \NC Antykwa Torunska       \NC \NR
%\NC antykwa-torunska-light     \NC Antykwa Torunska       \NC \NR
%\NC antykwa-torunska-cond      \NC Antykwa Torunska       \NC \NR
%\NC antykwa-torunska-lightcond \NC Antykwa Torunska       \NC \NR
%\NC antykwa-poltawskiego       \NC Antykwa Poltawskiego   \NC \NR
%\NC iwona-xx                   \NC Iwona                  \NC \NR
%\NC kurier-xx                  \NC Kurier                 \NC \NR
%\NC charter                    \NC Bitstream Charter      \NC \NR
%\NC gentium                    \NC SIL Gentium            \NC \NR

\startbuffer[bodyfontsotfbuy]
\switchtobodyfont[9pt]

\starttabulate[|l|l|l|]
\NC \bf Identifier                 \NC \bf file \NC \bf Supported styles \NC \FR
\NC zapfino                        \NC type-hgz \NC serif, handwriting\NC \NR
\NC optima-nova                    \NC type-hgz \NC sans\NC \NR
\NC optima-nova-os                 \NC type-hgz \NC sans\NC \NR
\NC optima-nova-light              \NC type-hgz \NC sans\NC \NR
\NC optima-nova-medium             \NC type-hgz \NC sans\NC \NR
\NC palatino-nova                  \NC type-hgz \NC serif\NC \NR
\NC palatino-nova-os               \NC type-hgz \NC serif\NC \NR
\NC palatino-nova-light            \NC type-hgz \NC serif\NC \NR
\NC palatino-nova-medium           \NC type-hgz \NC serif\NC \NR
\NC palatino-sans                  \NC type-hgz \NC sans\NC \NR
\NC palatino-informal              \NC type-hgz \NC sans\NC \NR
\NC melior                         \NC type-hgz \NC serif\NC \NR
\NC -- all four-variant fonts --   \NC type-xtx \NC Xserif \NC \NR
\NC -- all four-variant fonts --   \NC type-xtx \NC Xsans \NC \NR
\NC -- all four-variant fonts --   \NC type-xtx \NC Xmono \NC \NR
\NC times                          \NC type-xtx \NC serif \NC \NR
\NC palatino                       \NC type-xtx \NC serif \NC \NR
\NC helvetica                      \NC type-xtx \NC sans \NC \NR
\NC courier                        \NC type-xtx \NC mono \NC \NR
\NC hoefler                        \NC type-xtx \NC serif \NC \NR
\NC lucidagrande                   \NC type-xtx \NC sans \NC \NR
\NC optima                         \NC type-xtx \NC sans \NC \NR
\NC gillsans                       \NC type-xtx \NC sans \NC \NR
\NC gillsanslt                     \NC type-xtx \NC sans \NC \NR
\NC zapfino                        \NC type-xtx \NC handwriting, serif \NC \NR
\NC applechancery                  \NC type-xtx \NC calligraphy, serif \NC \NR
\NC timesnewroman                  \NC type-xtx \NC serif \NC \NR
\NC arial                          \NC type-xtx \NC sans \NC \NR
\NC lucida                         \NC type-xtx \NC serif, sans, mono, handwriting, calligraphy, fax\NC \NR
\stoptabulate
\stopbuffer

%\NC Identifier                 \NC Needed font package    \NC \NR
%\NC zapfino                    \NC Zapfino Pro OTF        \NC \NR
%\NC optima-nova-xx             \NC Optima Nova OTF        \NC \NR
%\NC palatino-nova-xx           \NC Palatino Nova OTF      \NC \NR
%\NC melior                     \NC Melior OTF             \NC \NR
%\NC times                      \NC MacOSX                 \NC \NR
%\NC palatino                   \NC MacOSX (Book Antiqua)  \NC \NR
%\NC helvetica                  \NC MacOSX (Helvetica Neue)\NC \NR
%\NC courier                    \NC MacOSX                 \NC \NR
%\NC hoefler                    \NC MacOSX                 \NC \NR
%\NC lucidagrande               \NC MacOSX                 \NC \NR
%\NC optima                     \NC MacOSX                 \NC \NR
%\NC gillsans                   \NC MacOSX                 \NC \NR
%\NC gillsanslt                 \NC MacOSX                 \NC \NR
%\NC zapfino                    \NC MacOSX                 \NC \NR
%\NC applechancery              \NC MacOSX                 \NC \NR
%\NC timesnewroman              \NC MS Office              \NC \NR
%\NC arial                      \NC MS Office              \NC \NR
%\NC lucida                     \NC MS Office              \NC \NR

\placetable
  [here]
  [tab:body font names 1]
  {The predefined body font identifiers for free Type~1 and \METAFONT\ fonts}
  {\getbuffer[bodyfontst1free]}


\placetable
  [here]
  [tab:body font names 2]
  {The predefined body font identifiers for commercial Type~1 fonts}
  {\getbuffer[bodyfontst1buy]}

\placetable
  [here]
  [tab:body font names 3]
  {The predefined body font identifiers for free Unicode (Opentype) fonts}
  {\getbuffer[bodyfontsotffree]}


\placetable
  [here]
  [tab:body font names 4]
  {The predefined body font identifiers for commercial Unicode (Opentype) fonts}
  {\getbuffer[bodyfontsotfbuy]}


In~\in{table}[tab:body font names 4] you will see three very special items: \type{Xserif},  \type{Xsans} and \type{Xmono}. These
belong to a special \XETEX-only trick called \quote{wildcard typescripts}.

\XETEX\ offers some nice features in terms of automatically finding related fonts in a family, namely the italic, bold, and
bolditalic alternatives. To take advantage of that, there's a set of wildcard typescripts that take an arbitrary Macintosh font
name as input, and provide as many of the alternatives it can find. To set these typescripts (and the calling conventions) apart
from the familiar ones, the typescripts are identified with \type{Xserif}, \type{Xsans}, and \type{Xmono}. 

To call the typescripts, it's most convenient to define a typeface that uses these features. The named font slot should contain the
display name of the Regular alternative (not the family name) of the font in question.  For example, you could have the
following mix:

\starttyping
\starttypescript[myface]
\definetypeface[myface][rm][Xserif][Baskerville]   [default]
\definetypeface[myface][tt][Xmono] [Courier]       [default][rscale=.87]
\definetypeface[myface][ss][Xsans] [Optima Regular][default]
\stoptypescript
\stoptyping

As you can see, you can activate relative scaling of face sizes. The above definitions look very much like any other typeface
definition, except that the serif/sans/mono identifier is preceded with X, and that there is no underlying "Optima Regular" defined
anywhere. Those missing bits of the definitions are handled by typescript and \XETEX\ magic.

\subsection[sec:body font environment]{Body font environments}

\macro{\tex{setupbodyfontenvironment}}
\macro{\tex{definebodyfontenvironment}}

Earlier we have seen that within a font family there are
different font sizes. The relations between these sizes
are defined by {\em body font environments}.

For all regular font sizes, environments are predefined
that fulfill their purpose adequately. However when you want
to do some extra defining yourself there is:

\showsetup{definebodyfontenvironment}


The first argument is optional, and specifier the typeface identifier 
that this particular body font environment setup is for.
It defaults to the current typeface.

The second argument is the size of the body font environment that is being defined.  This
argument is not really optional, the macro syntax description is a little misleading.

The third argument once again is optional, and contains the actual settings
as key-value pairs. If it is missing, defaults will be guessed at
by \CONTEXT\ itself.

\starttabulate[|lT|p|]
\NC text           \NC Math text size\NC \NR
\NC script         \NC Math script size\NC \NR
\NC scriptscript   \NC Math scriptscript size\NC \NR
\NC x              \NC The size used for the \type{\tfx} etc. commands\NC \NR
\NC xx             \NC The size used for the \type{\tfxx} command\NC \NR
\NC big            \NC The \quote{larger} font size\NC \NR
\NC small          \NC The \quote{smaller} font size\NC \NR
\NC interlinespace \NC Distance between lines in a paragraph, can be ignored
                       because a reasonable default is always set up\NC \NR
\stoptabulate 

So, when you want to have a somewhat bigger fontsize for 
just a few words (e.g. for a book title) you can type:

\startexample
\starttyping
\definebodyfontenvironment [24pt]
\switchtobodyfont[24pt]
\stoptyping
\stopexample

but longer stretches of text, you will need to set up most of the values, using 
something like this 

\startexample
\starttyping
\definebodyfontenvironment
  [22pt]
  [        text=22pt,
         script=17.3pt,
   scriptscript=14.4pt,
              x=17.3pt,
             xx=14.4pt,
            big=28pt,
          small=17.3pt]
\stoptyping
\stopexample

To tweak already defined sizes, there is an accompagnying setup command with the same
parameter conventions:

\showsetup{setupbodyfontenvironment}

\section[sec:font features]{Font feature sets}

\macro{\tex{definefontfeature}}

As we have seen already, some fonts contain extra information besides the actual glyph
shapes. In traditional \TEX\ fonts, the extra information is roughly limited to kerning
pairs and ligature information, and both of these \quote{features} are automatically
applied to the text that is being typeset.  In the odd case where one of the two needs to
be suppressed, a little bit of macro trickery can do the job without too many
complicating factors.

But with the new OpenType font format that is used by \XETEX\ and \LUATEX, the list of
possible features is increased enormously. OpenType fonts have not just kerning
information and ligature information, but there can also be other features like optional
oldstyle figures, caps and smallcaps glyphs, decorative swashes, etc.  all inside a 
single font file. 

Not only that, but some of these features are not even supposed to be active all the
time. Certain features should only be activated if the user asks for it, other features
depend on the script and language that is in use for the text that is being typeset.

This is a big step forward in that there are now far fewer fonts needed to achieve the
same level of quality than before, all that extra font information also poses a big
challenge for macro writers. And add to that the fact that at the core, the two engines 
(\XETEX\ and  \LUATEX) handle OpenType fonts completely different from each other.

\CONTEXT\ has a new subsystem called \quote{font features} to create order in this forest
of features. The most important command is \type{\definefontfeature}. This command can be
used to group various font features under a single symbolic name, that can then be used
as e.g. the argument to the \type{features} key of \type{\definetypeface}.

\showsetup{definefontfeature} % still empty

\startexample
\starttyping
\definefontfeature
   [default-base]
   [script=latn,language=dflt,liga=yes,kern=yes,tlig=yes,trep=yes]
\stoptyping
\stopexample

As you can probably guess, the first argument is the symbolic name that is being
defined. The second argument is a mix of a-hoc settings and OpenType font features.

\starttabulate[|lT|p|]
\NC script              \NC An OpenType script identifier \NC \NR
\NC language            \NC An OpenType script language identifier \NC \NR
\NC tlig, texligatures  \NC A virtual feature for legacy (\TEX-style) automatic ligatures\NC \NR
\NC trep, texquotes     \NC A virtual feature for legacy (\TEX-style) automatic ligatures
                            (only works in \MKIV)\NC \NR
\NC mode                \NC Processing mode for \MKIV. 
                            \type{node} and \type{base} allowed, \type{node} is default\NC \NR
\NC <tag>               \NC Any OpenType feature tag is acceptable, but in \MKIV\
                            only a \quote{known} subset actually has any effect, and then
                            only in \type{node} mode. 
                            This list is given in~\in{table}[tab:mkivfeatures].
                            In \XETEX, processing depends on the internal subengine that
                            is used by \XETEX, and that is outside of \CONTEXT's control. \NC \NR
\stoptabulate

A few fontfeatures are predefined by context:

\starttabulate[|l|l|]
\NC  default  \NC liga=yes,kern=yes,tlig=yes,trep=yes          \NC \NR
\NC smallcaps \NC liga=yes,kern=yes,tlig=yes,trep=yes,smcp=yes \NC \NR
\NC oldstyle  \NC liga=yes,kern=yes,tlig=yes,trep=yes,onum=yes \NC \NR
\stoptabulate


\startbuffer[mkivfeatures]
\begingroup
\def\*#1#2#3#4{\ctxlua{tex.sprint(tex.vrbcatcodes,fonts.otf.tables.features["#1#2#3#4"])}}
\startsimplecolumns
\starttabulate[|l|l|p|]
\NC aalt\NC \*aalt\NC \NC \NR
\NC abvm\NC \*abvm\NC \NC \NR
\NC afrc\NC \*afrc\NC \NC \NR
\NC akhn\NC \*akhn\NC \NC \NR
\NC blwm\NC \*blwm\NC \NC \NR
\NC c2pc\NC \*c2pc\NC \NC \NR
\NC c2sc\NC \*c2sc\NC \NC \NR
\NC calt\NC \*calt\NC \NC \NR
\NC case\NC \*case\NC \NC \NR
\NC ccmp\NC \*ccmp\NC \NC \NR
\NC clig\NC \*clig\NC \NC \NR
\NC cpsp\NC \*cpsp\NC \NC \NR
\NC cswh\NC \*cswh\NC \NC \NR
\NC curs\NC \*curs\NC \NC \NR
\NC dlig\NC \*dlig\NC \NC \NR
\NC dnom\NC \*dnom\NC \NC \NR
\NC expt\NC \*expt\NC \NC \NR
\NC fina\NC \*fina\NC \NC \NR
\NC fin2\NC \*fin2\NC \NC \NR
\NC fin3\NC \*fin3\NC \NC \NR
\NC frac\NC \*frac\NC \NC \NR
\NC fwid\NC \*fwid\NC \NC \NR
\NC haln\NC \*haln\NC \NC \NR
\NC hist\NC \*hist\NC \NC \NR
\NC hkna\NC \*hkna\NC \NC \NR
\NC hlig\NC \*hlig\NC \NC \NR
\NC hngl\NC \*hngl\NC \NC \NR
\NC hwid\NC \*hwid\NC \NC \NR
\NC init\NC \*init\NC \NC \NR
\NC isol\NC \*isol\NC \NC \NR
\NC ital\NC \*ital\NC \NC \NR
\NC jp78\NC \*jp78\NC \NC \NR
\NC jp83\NC \*jp83\NC \NC \NR
\NC jp90\NC \*jp90\NC \NC \NR
\NC kern\NC \*kern\NC \NC \NR
\NC liga\NC \*liga\NC \NC \NR
\NC lnum\NC \*lnum\NC \NC \NR
\NC locl\NC \*locl\NC \NC \NR
\NC mark\NC \*mark\NC \NC \NR
\NC medi\NC \*medi\NC \NC \NR
\NC med2\NC \*med2\NC \NC \NR
\NC mgrk\NC \*mgrk\NC \NC \NR
\NC mkmk\NC \*mkmk\NC \NC \NR
\NC nalt\NC \*nalt\NC \NC \NR
\NC nlck\NC \*nlck\NC \NC \NR
\NC nukt\NC \*nukt\NC \NC \NR
\NC numr\NC \*numr\NC \NC \NR
\NC onum\NC \*onum\NC \NC \NR
\NC ordn\NC \*ordn\NC \NC \NR
\NC ornm\NC \*ornm\NC \NC \NR
\NC pnum\NC \*pnum\NC \NC \NR
\NC pref\NC \*pref\NC \NC \NR
\NC pres\NC \*pres\NC \NC \NR
\NC pstf\NC \*pstf\NC \NC \NR
\NC rlig\NC \*rlig\NC \NC \NR
\NC rphf\NC \*rphf\NC \NC \NR
\NC rtla\NC \*rtla\NC \NC \NR
\NC salt\NC \*salt\NC \NC \NR
\NC sinf\NC \*sinf\NC \NC \NR
\NC smcp\NC \*smcp\NC \NC \NR
\NC smpl\NC \*smpl\NC \NC \NR
\NC ss01\NC \*ss01\NC \NC \NR
\NC ss02\NC \*ss02\NC \NC \NR
\NC ss03\NC \*ss03\NC \NC \NR
\NC ss04\NC \*ss04\NC \NC \NR
\NC ss05\NC \*ss05\NC \NC \NR
\NC ss06\NC \*ss06\NC \NC \NR
\NC ss07\NC \*ss07\NC \NC \NR
\NC ss08\NC \*ss08\NC \NC \NR
\NC ss09\NC \*ss09\NC \NC \NR
\NC subs\NC \*subs\NC \NC \NR
\NC sups\NC \*sups\NC \NC \NR
\NC swsh\NC \*swsh\NC \NC \NR
\NC titl\NC \*titl\NC \NC \NR
\NC tnam\NC \*tnam\NC \NC \NR
\NC tnum\NC \*tnum\NC \NC \NR
\NC trad\NC \*trad\NC \NC \NR
\NC unic\NC \*unic\NC \NC \NR
\NC zero\NC \*zero\NC \NC \NR
\stoptabulate
\stopsimplecolumns
\endgroup
\stopbuffer

\placetable
  [here]
  [tab:mkivfeatures]
  {The OpenType features that are understood by \MKIV\ in \type{mode=node} processing mode}
  {\getbuffer[mkivfeatures]}


\section{Displaying the current font setup}

\macro{\tex{showbodyfont}}
\macro{\tex{showbodyfontenvironment}}

With the command \type {\showbodyfont} an overview is generated of the available 
characters, and an overview of the different fontsizes within a family can be
summoned with \type{\showbodyfontenvironment}.

\showsetup{showbodyfont}

\showsetup{showbodyfontenvironment}


Specifiying actual \type{IDENTIFIER}s to these commands is currently unreliable 
because they internally are still counting on an older system of body font 
definitions, but you can safely use a size argument to get the information 
for the current font set.

Below an example of the possible output is shown, for \type{\showbodyfont[12pt]}  

\showbodyfont[12pt]

And the output of \type{\showbodyfontenvironment[12pt]} is:

\showbodyfontenvironment[12pt]


\section{Math fonts}
\index{math fonts}
\macro{\tex{mf}}
\macro{\tex{enablembox}}

\fixme{This is paragraph is a mess}

There are only a few font families that can handle math. There
is the Computer Modern Roman, the very beautiful Lucida
Bright that we prefer in electronic documents, and of course
one can use the \quote {prefered by publishers font} Times.
These fonts carry a complete set of characters and symbols
for mathematical typesetting. Among these, the Computer
Modern Roman distinguishes itself by its many design sizes,
which pays off when typesetting complicate math. On this
design there are a few variations called Euler and Concrete.
\footnote {See Concrete Mathematics by Knuth cs., an
outstanding book from the perspective of typography and
didactically.}



\startbuffer[math-1]
$\tf x^2+\bf x^2+\sl x^2+\it x^2+\bs x^2+ \bi x^2 =\rm 6x^2$
$\tf x^2+\bf x^2+\sl x^2+\it x^2+\bs x^2+ \bi x^2 =\tf 6x^2$
$\tf x^2+\bf x^2+\sl x^2+\it x^2+\bs x^2+ \bi x^2 =\bf 6x^2$
$\tf x^2+\bf x^2+\sl x^2+\it x^2+\bs x^2+ \bi x^2 =\sl 6x^2$
\stopbuffer

\startbuffer[math-2]
$\tf\mf x^2 + x^2 + x^2 + x^2 + x^2 + x^2 = 6x^2$
$\bf\mf x^2 + x^2 + x^2 + x^2 + x^2 + x^2 = 6x^2$
$\sl\mf x^2 + x^2 + x^2 + x^2 + x^2 + x^2 = 6x^2$
$\bs\mf x^2 + x^2 + x^2 + x^2 + x^2 + x^2 = 6x^2$
$\it\mf x^2 + x^2 + x^2 + x^2 + x^2 + x^2 = 6x^2$
$\bi\mf x^2 + x^2 + x^2 + x^2 + x^2 + x^2 = 6x^2$
\stopbuffer

\startbuffer[math-3]
$\bf x^2 + x^2 + x^2 + x^2 + x^2 + x^2 = \mf 6x^2$
\stopbuffer

\startbuffer[math-4]
$\bf x^2 + \hbox{whatever} + \sin(2x)$
\stopbuffer

Many \TEX\ users have chosen \TEX\ for its superb math type
setting. The math oriented character of \TEX\ has also
influenced the font mechanism. We will not go into any
details but the central key is the {\em family}. There is a
font family for \type {\bf}, \type {\it}, etc. Within a
family we distinguish three members: text, script and
scriptscript, or a normal, smaller and smallest font. The
normal font size is used for running text and the smaller
ones for sub and superscripts. The next example will show
what the members of a font family can do.

\typebuffer[math-1]

When this is typeset you see this:

\startlines
\getbuffer[math-1]
\stoplines

We can see that the characters adapt but that the
symbols are typeset in the same font. Technically this
means that the symbols are set in font family~0 (there are
16~families) and in this case that is default \type {\tf}.

It can also be done somewhat differently as we will see in
the next example. A new command is used: \type {\mf}, which
stands for {\em math font}. This command takes care of the
symbols in such a way that they are set in the actual
font.\footnote{We also see a strange visual effect. It seems
as if the lines are sloped.}

\startlines
\getbuffer[math-2]
\stoplines

You should take into account that \TEX\ typesets a formula
as a whole. In some cases this means that setups at the end
of the formula have effect at the beginning.

\typebuffer[math-2]

The exact location of \type {\mf} is not that important.
We also could have typed:

\typebuffer[math-3]

One other aspect of fonts in math mode is the way reserved
names like \type {\sin} and \type {\cos} are typeset.

\typebuffer[math-4]

Unlike plain \TEX, the $\bf\sin$ is also set bold.

\getbuffer[math-4]


\section{Em and Ex}
\index[em]{\type{em}}
\index[ex]{\type{ex}}

In specifying dimensions we can distinguish physical units
like \type {pt} and \type {cm} and internal units like \type
{em} and \type {ex}. These last units are related to the
actual fontsize. When you use these internal units in
specifying for example horizontal and vertical spacing you
don't have to do any recalculating when fonts are switched
in the style definition.

Some insight in these units does not hurt. The width of an
\type {em} is not the with of an M, but that of an --- (an
em||dash). When this glyph is not available in the font
another value is used. \in {Table} [ems] shows some
examples. We see that the width of a digit is about \type
{.5em}. In Computer Modern Roman a digit is excactly half
an em wide.

\startbuffer[em-ex-1]

\def\jump{\vl\hskip1em\vl}%
\def\mmmm{\vl M\vl}%
\def\dash{\vl---\vl}%
\def\numb{\vl12\vl}%

\starttable[|c|c|c|c|c|c|]
\HL
\VL \type{\tf} \VL \type{\bf} \VL \type{\sl}  \VL
    \type{\tt} \VL \type{\ss} \VL \type{\tfx} \VL\SR
\HL
\VL \tf\numb   \VL \bf\numb   \VL \sl \numb   \VL
    \tt\numb   \VL \ss\numb   \VL \tfx\numb   \VL\FR
\VL \tf\mmmm   \VL \bf\mmmm   \VL \sl \mmmm   \VL
    \tt\mmmm   \VL \ss\mmmm   \VL \tfx\mmmm   \VL\MR
\VL \tf\jump   \VL \bf\jump   \VL \sl \jump   \VL
    \tt\jump   \VL \ss\jump   \VL \tfx\jump   \VL\MR
\VL \tf\dash   \VL \bf\dash   \VL \sl \dash   \VL
    \tt\dash   \VL \ss\dash   \VL \tfx\dash   \VL\LR
\HL
\stoptable

\stopbuffer

\placetable
  [here][ems]
  {The width of an \type{em}.}
  {\getbuffer[em-ex-1]}

In most cases we use \type{em} for specifying width and and
\type {ex} for height. \in {Table} [exes] shows some
examples. We see that the height equals the height of a
lowercase~x.

\startbuffer[em-ex-2]

\def\show
  {\hbox
    {\forgetall
     \offinterlineskip
     \vbox
       {\hsize1em\hl[1]\endgraf\vskip1ex\hl[1]}%
     \hskip.25em
     \vbox
       {\hsize.5em \vskip\linewidth x\vskip\linewidth}}}%

\starttable[|c|c|c|c|c|c|]
\HL
\VL \type{\tf} \VL \type{\bf} \VL \type{\sl}  \VL
    \type{\tt} \VL \type{\ss} \VL \type{\tfx} \VL\SR
\HL
\VL \tf\show   \VL \bf\show   \VL \sl\show    \VL
    \tt\show   \VL \ss\show   \VL \tfx\show   \VL\SR
\HL
\stoptable

\stopbuffer

\placetable
  [here][exes]
  {The height of an \type{ex}.}
  {\getbuffer[em-ex-2]}

\section [sec:encodings]{Encodings and mappings}

This paragraph only applies to \PDFTEX. If you are exclusively using
\XETEX\ or \MKIV, you can safely ignore the following text.

Not every language uses the (western) latin alphabet. Although
in most languages the basic 26 characters are somehow used,
they can be combined with a broad range of accents placed in
any place.

In order to get a character representation, also called
glyph, in the resulting output, you have to encode
it in the input. This is no problem for \type {a..z}, but
other characters are accessed by name, for instance \type
{\eacute}. The glyph \eacute\ can be present in the font but when
it's not there, \TEX\ has to compose the character from a
letter~e and an accent~\textgrave.

In practice this means that the meaning of \type {\eacute}
depends on the font and font encoding used. There are many
such encodings, each suited for a subset of languages.

\starttabulate [|lT|p|l|]
\HL
\NC \bf encoding \NC \bf usage \NC \bf status \NC \NR
\HL
\NC 8r        \NC a (strange) mixture of encodings                            \NC useless  \NC \NR
\NC default   \NC the 7 bit \ASCII\ encoding as used by plain \TEX            \NC obsolete \NC \NR
\NC ec        \NC the prefered encoding of \TEX\ distributions                \NC okay     \NC \NR
\NC greek     \NC an encoding for modern greek                                \NC okay     \NC \NR
\NC qx        \NC an encoding that covers most eastern european languages     \NC okay     \NC \NR
\NC t2a       \NC a cyrillic \TEX\ font encoding                              \NC ?        \NC \NR
\NC t2b       \NC another cyrillic \TEX\ font encoding                        \NC ?        \NC \NR
\NC t2c       \NC another another cyrillic \TEX\ font encoding                \NC ?        \NC \NR
\NC t5        \NC an encoding dedicated to vietnamese (many (double) accents) \NC okay     \NC \NR
\NC texnansi  \NC a combination of \TEX\ and Adobe standard encoding          \NC okay     \NC \NR
\HL
\stoptabulate

These encodings are font related as is demonstrated in \in
{figure} [fig:font a], \in{}[fig:font b],  \in{}[fig:font c], \in
{and} [fig:font d]. Here we used the \type {\showfont} command.

\definefontsynonym [TestA] [ec-lmr10]       [encoding=ec]
\definefontsynonym [TestB] [texnansi-lmr10] [encoding=texnansi]
\definefontsynonym [TestC] [qx-lmr10]       [encoding=qx]
\definefontsynonym [TestD] [t5-lmr10]       [encoding=t5]

\placefigure
  [here][fig:font a]
  {The Latin Modern Roman font in ec encoding.}
  {\scale[width=\textwidth]{\showfont[TestA]}}

\placefigure
  [here][fig:font b]
  {The Latin Modern Roman font in texnansi encoding.}
  {\scale[width=\textwidth]{\showfont[TestB]}}

\placefigure
  [here][fig:font c]
  {The Latin Modern Roman font in qx encoding.}
  {\scale[width=\textwidth]{\showfont[TestC]}}

\placefigure
  [here][fig:font d]
  {The Latin Modern Roman font in t5 encoding.}
  {\scale[width=\textwidth]{\showfont[TestD]}}

The situation is even more complicated than it looks, since
the font may be virtual, that is, built from several fonts.

The advantage of using specific encodings is that you can
let \TEX\ hyphenate words in the appropriate way. The
hyphenation patterns are applied to the internal
data structures that represent the sequence of glyphs. In
spite of what you may expect, they are font||dependent! Even
more confusing: they not only depend on the font encoding,
but also on the mapping from lower to uppercase characters,
or more precise, on the existence of such a mapping.

Unless you want to play with these encodings and mappings,
in most cases you can forget their details and rely on what
other \TEX\ experts tell you to do. Normally switching from
one to another encoding and|/|or mapping takes place with the
change in fonts or when some special output encoding is
needed, for instance in \PDF\ annotations and|/|or unicode
vectors that enable searching in documents. So, to summarize
this: encodings and mappings depend on the fonts used as well
have consequences for the language specific hyphenation
patterns. Fortunately \CONTEXT\ handles this for you
automatically.

If you want to know to what extent a font is complete and
characters need to be composed on the fly, you can typeset a
a couple of tables. The (current) composition is shown by
\type {\showaccents}:

\showaccents

with \type {\showcharacters}, you get a list of named
characters (and glyphs) as known to the system.

\showcharacters

If you want to know what patterns are used, you can try to
hyphenate a word with \type {\showhyphenations}.

\showhyphenations{abracadabra}

\stopcomponent
