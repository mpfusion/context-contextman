\startcomponent co-typography

\environment contextref-env
\product contextref

\def\definition#1{{\it #1}}

% this chapter needs lots of typescripts

\usetypescriptfile[type-buy]
\usetypescriptfile[type-gyr]
\usetypescript[map,sans,mono,handwriting,calligraphy,serif]
              [helvetica,schoolbook,times,antykwa-torunska]


\chapter[typography]{Typography}

\section{Introduction}
\index{typography}

Throughout the millennia humans have developed and adapted methods for
storing facts and thoughts on a variety of different mediums. A very
efficient way of doing this is using logograms, like Chinese have done
for ages. Another method is to represent each syllable in a word by a
symbol, like the Japanese do when writing telegrams. However, the most
common way of storing characters is by using a limited set of shapes
representing basic sounds (a.k.a. phonemes). Such a collection is
called an \definition{alphabet}, and the shapes are called
\definition{letters}.

\TEX\ is primarily meant for typesetting languages that 
use this third method. The other two methods can also be dealt
with, but some extra effort is needed. In this chapter we will focus
on languages that use alphabets, the other methods will be
explained in later chapters.

The shapes representing the characters that make up an alphabet are
more or less standardized, and thereby can be recognized by readers
even if their details differ.  A collection of pictures matching
character shapes is called a \definition{font}, and the pictures in a
font are called \definition{glyphs}.

\startlinecorrection
\ruledhbox to \hsize
  {\hss
   \definefont[test][ComputerModern          at 60pt]\test gap\setstrut\strut\hss
   \definefont[test][Helvetica               at 60pt]\test gap\hss
   \definefont[test][Times-Roman             at 60pt]\test gap\hss
   \definefont[test][AntykwaTorunska-Regular at 60pt]\test gap\hss}
\stoplinecorrection

From left to right we see a Computer Modern font, a Helvetica clone, a
Times Roman clone and an Antiqua Torunska font, all scaled to 60pt.
As you can see, quite some variation is possible and when intermixed,
the result is not always pleasing. The term \definition{fonts collection}
refers to a set of fonts combined together in such a way that the
overall appearance on a page looks good and reading is as comfortable
as possible.

\startlinecorrection
\ruledhbox to \hsize
  {\hss
   \definefont[test][Schoolbook-Roman      at 48pt]\test lap\setstrut\strut\hss
   \definefont[test][Schoolbook-Bold       at 48pt]\test lap\hss
   \definefont[test][Schoolbook-Italic     at 48pt]\test lap\hss
   \definefont[test][Schoolbook-BoldItalic at 48pt]\test lap\hss}
\stoplinecorrection

Even within a single font design there can be variations. In the
example above we see a light, a bold, an italic, and a bold
italic alternative of a font. Such a set of fonts with the same basic
design is known as a \definition{font family}. 

The distance between the individual glyphs in a word depend
on the combinations of these glyphs. In the next sample, the
gap between the~b and the~o as well as the distance between
the~o and the~x is slightly altered. This is called kerning.

\startlinecorrection
\vbox
  {\forgetall
   \vfill
   \definefont[test][ComputerModern at 48pt]\test
   \hbox{box}
   \vskip-36pt
   \def\\#1%
     {\toprulefalse
      \bottomrulefalse
      \ruledhbox{\vrule width 0pt height 72pt#1}}
   \hbox{\\b\\o\\x}}
\stoplinecorrection

The font shown here is Computer Modern, the default \TEX\ font. This
font is designed by Donald Knuth. The Computer Modern has many kerning
pairs, while the Palatino||like font that is used for most of the text
in this manual has only a few.

This form of micro||typography is not to be altered by the user, it is
part of the font design and the required data is stored inside the
font file, together with the drawing routines for the actual
pictures. It {\em is\/} possible for the user to alter fonts and
interline spacing and some more aspects on the level of
macro||typography. The choice of font is the main topic of this
chapter.

There are many different methods that can be used to classify
fonts. There are classification systems based on the period in which
the style was first developed; on the characteristics of the font; or
the font application, like a newspaper or a book. Often, classification
systems mix these characteristics up to some point.

For example, the Computer Modern family can be classified as a
\quote{modern} font. This is a classication that primarily indicates
a period (late 18\high{th} century), but it also implies a particular
shape: \quote{modern} fonts have a high contrast between thick and
thin strokes, and their stress axis is perfectly vertical.

At the same time, specific fonts in the Computer Modern family can be
classified as \quote{serif} (glyphs strokes have embellishments at the
end), \quote{sans serif} (shapes end abruptly), or \quote{monospaced}
(all glyphs have the same width). 

The Computer Modern family is in fact inspired by one font in particular:
\quote{Modern 8a} by the Monotype corporation. Knuth implemented
Computer Modern in \METAFONT\ using parameters so that he could
generate a whole collection of fonts all closely matching eachother in
style. In \CONTEXT\ you will normally use a reimplementation of
Computer Modern using a more modern file format (Type~1 or OpenType).
This new version is called \quote{Latin Modern}, and also features an
extended glyph set making it usable for languages that could not be
typeset with Knuth's original fonts.

\startlinecorrection
\ruledhbox to \hsize
  {\hss
   \definefont[test][LMRoman-Regular           at 48pt]\test ok\setstrut\strut\hss
   \definefont[test][LMSans-Regular            at 48pt]\test ok\hss
   \definefont[test][LMTypewriter-Regular      at 48pt]\test ok\hss
   \definefont[test][LMRoman-CapsRegular       at 48pt]\test ok\hss
   \definefont[test][LMTypewriterVarWd-Regular at 48pt]\test ok\hss}
\stoplinecorrection

In this example we see five font styles of Latin Modern: the Roman,
Sans, Typewriter, Smallcaps and Variable Typewriter. Computer Modern
is one of the few font families that comes with dedicated design
sizes.  The example below shows the differences of a 5, 7, 9, 12 and
17~point design scaled up to 48 points. Such nuances in font size are
seldom seen these days.

\startlinecorrection
\ruledhbox to \hsize
  {\hss
   \definefont[test][cmr5  at 48pt]\test ok\setstrut\strut\hss
   \definefont[test][cmr7  at 48pt]\test ok\hss
   \definefont[test][cmr9  at 48pt]\test ok\hss
   \definefont[test][cmr12 at 48pt]\test ok\hss
   \definefont[test][cmr17 at 48pt]\test ok\hss}
\stoplinecorrection

As explained earlier, the general appearance of a font style can be
classified according to many schemes. 
In \in {table} [tab:font triplets] we see some examples of the naming
of font styles that are often found together in a single document.

\startbuffer[styles]

\vskip1ex
\startcombination[3*3]
  {\rmtfc\setupinterlinespace    Serif\end} {}
  {\sstfc\setupinterlinespace     Sans\end} {}
  {\tttfc\setupinterlinespace     Mono\end} {}
  {\rmtfc\setupinterlinespace  Regular\end} {}
  {\sstfc\setupinterlinespace  Support\end} {}
  {\tttfc\setupinterlinespace TeleType\end} {}
  {\rmtfc\setupinterlinespace    Roman\end} {}
  {\sstfc\setupinterlinespace     Sans\end} {}
  {\tttfc\setupinterlinespace     Type\end} {}
\stopcombination
\vskip1ex

\stopbuffer

\placetable
  [here][tab:font triplets]
  {Some ways of classifying the styles in a font.}
  {\getbuffer[styles]}

The top two series are normally used by typographers, but in
\CONTEXT\ we use the bottom series because that is what was
traditionally used in plain \TEX. The command \type {\rm} is used to
switch to a roman|/|serif|/|regular style, and \type {\tt} for
switching to mono spaced or typewriter style.

In the next sections we will go into switching of font styles and
fonts in your documents. Be warned that the font switching mechanism
is rather complex. This is caused by the different modes like math
mode and text mode in \CONTEXT. If you want to be understand the
mechanism fully, you will have to acquaint yourself with the concept
of encoding vectors and obtain some knowledge on fonts and their
peculiarities.


\section[bodyfont]{The mechanism}
\index{bodyfont}
\index{font size}
\index{roman}
\index{sans serif}
\index{typewriter}
\macro{\tex{setupbodyfont}}
\macro{\tex{switchtobodyfont}}

Font switching is one of the eldest features of \CONTEXT\ because font
switching is indispensable in a macro package.  During the years
extensions to the font switching mechanism were inevitable. We have
chosen the following starting points during the development of this
mechanism:

\startitemize[packed]
\item To change a {\em style} must be easy, this
      means switching to: roman (serif, regular), sans serif
      (support), teletype (or monospaced) etc. (\type {\rm},
      \type {\ss}, \type {\tt} etc.)
\item More than one {\em variations} of glyphs shapes must be
      available like slanted and bold (\type {\sl} and \type {\bf}).
\item Different font {\em families} like Latin Modern Roman 
      and Lucida Bright must be supported.
\item It must be possbile to combine different families into font
      {\em collections}.
\item Different sub|| and superscripts must be
      available. These script sizes have to be retained across the
      switching of family, style and alternative.
\item It should be possible to combine all of these requirements
      into a single definition unit called a {\em body font}.
\item Changing the global font collection as wel as the size must 
      also be easy, and so sizes between 8pt and 14.4pt must be
      available by default.
\stopitemize

Before reading further, please stop for a moment to make sure you
thoroughly comprehend the above paragraphs. \CONTEXT's terminology
probably differs from what you are accustomed to, especially if you
were previously a \LATEX\ user.

Text can be typeset in different font sizes. We often use the unit
\type {pt} to specify the size. The availability of these font sizes
are defined in definition files.  Traditionally font designers used to
design a glyph collection for each font size, but nowadays most fonts
have a single design size of 10 points, or small set of sizes with
names indicating their proposed use, like {\em caption}, {\em text},
and {\em display}.

\blank
\goodbreak

The bodyfont (main font), font style and size is set up with:

\showsetup{setupbodyfont}

The various identifiers 

In a running text a temporary font switch is done with the
command:

\showsetup{switchtobodyfont}

This command doesn't change the bodyfont in headers and
footers. With \type {small} and \type {big} you switch to a
smaller or larger font.

In most cases, the command \type {\setupbodyfont} is only used once:
in the style definition, and font switching inside the document is
done with \type {\switchtobodyfont}. Don't confuse these two because
that may lead to some rather strange but legitimate effects. 

\subsection{Body font sizes}

Body font sizes actually consist of two components. Of course if you
specify a size it directly specifies the size at which the main font
is loaded, but a number of indirect parameters have to taken care of
as well. Think of things like the font size used in headers, footers,
footnotes, sub|| and superscripts, as well as the interline space and
a few others. 

This is why in \CONTEXT\ there is the concept of a {\em body font
environment} (expressed as a dimension), and that is what you pass as
an argument to \type{\setupbodyfont} or \type{\switchtobodyfont}. The
definitions as presented above use the indication \type{5pt ... 12pt}
for the body font environment, but actually any dimension is
acceptable. 

The most frequently used sizes are predefined as body font
environments: 4pt \dots\ 12pt, 14.4pt, and 17.3pt. But when you use a
different, not-yet-defined size specification |<|for example for a
titlepage|>| \CONTEXT\ will define a body font environment for that
size automatically.  While doing so, \CONTEXT\ normally works with a
precision of 1~decimal to prevent unnecessary loading of fontsizes
with only small size differences.


Be warned that in this case, the results may be a less than ideal. The
reason is that \CONTEXT\ not just has to load the actual font, but it
also has to guess at the various other settings like the relative font
sizes and the interline space.  It does so by using the values from
the nearest smaller body font environment is that is already defined.

You can extend the list of predefined body font environments and even
alter the precision in body font matching. See
the~\in{section}[bodyfontsizes] for detailed information about how to
tweak or define your own body font sizes.

\blank

To end this section, the example below demonstrates how the interline
space is adapted automatically, when changing the size of the
bodyfont. Consider this input:

\startbuffer
{\switchtobodyfont[14.4pt] with these commands \par}
{\switchtobodyfont[12pt] for font switching  \par}
{\switchtobodyfont[10pt]  it is possible to   \par}
{\switchtobodyfont[8pt]  produce an eyetest: \par}
{\switchtobodyfont[6pt]  a x c e u i w m q p \par}
\stopbuffer

\startexample
\typebuffer
\stopexample

The actual \CONTEXT\ behaviour is shown below on the left. On the
right you can see what would have happened if the interline space
were not automatically adapted.

\startlinecorrection
\startcombination
  {\vtop{\forgetall\hsize.4\textwidth                \getbuffer}} {}
  {\vtop{\forgetall\hsize.4\textwidth\everybodyfont{}\getbuffer}} {}
\stopcombination
\stoplinecorrection

\subsection{Body font identifiers}

\macros{\tex{usetypescript}}

In the definition block of \type{setupbodyfont} there was a list of
words given besides the special marker \type{IDENTIFIER}. These words
are the \CONTEXT\ names for the font styles that we ran into earlier,
with a few aliases. Here are the defined font styles in \CONTEXT\ in
table format:

\starttabulate[|l|p|]
\NC Identifier                \NC Maps to \NC\NR
\NC serif, regular, roman     \NC rm \NC\NR
\NC sans, support, sansserif  \NC ss \NC\NR
\NC mono, type, teletype      \NC tt \NC\NR
\NC handwritten               \NC hw \NC\NR
\NC calligraphic              \NC cg \NC\NR
\stoptabulate

You can see that, apart from being all lowercase, the first lines
three lines match the identifiers used in~\in {table} [tab:font
triplets] exactly. 

The other two extra font styles are defined because they are sometimes
useful when dealing with really large font families or with very
elaborate document layout definitions. In the \CONTEXT\ distribution,
only the Lucida font family uses these styles, and in the default
Latin Modern font set they are simply ignored.  You could use them in
your own font support files (see the next chapter on how to do that).

We will see later that there are other and easier ways to switch the
font style, so if \type{\setupbodyfont} could only be used for this
purpose it would be not all that useful. But luckily there is more:
the optional \type{IDENTIFIER} can be a font collection name that has been
defined in a font support file. \CONTEXT\ expects you to define
your own font collections, but there are a few examples predefined. 

Because some extra work needs to be done for font collections (b.t.w.,
a font collection identifier is called a
\quote{typescript}\index{typescript}); you almost always need to have
an extra line with \type{\usetypescript} immediately before the
\type{\setupbodyfont} command to prepare the \CONTEXT\ internals. We
will get back to \type{\usetypescript} later.

A typical input sequence for selecting the predefined \quote{palatino}
font set in \MKII\ will look like this:

\starttyping
\usetypescript[palatino][texnansi]
\setupbodyfont[palatino,12pt]
\stoptyping

This first prepares and then selects the predefined font collection
named \type{palatino} that will actually make \PDFTEX\ load the free
Type~1 font URW Palladio, in Y\&Y's \type{texnansi} font encoding.
URW Palladio is a font that looks a lot like the commercial font 
Linotype Palatino by Hermann Zapf.

In \XETEX\ and \MKIV\ the situation is a little bit different because
fonts are reencoded to match Unicode whenever that is possible. That
in turn means that \XETEX\ and \MKIV\ prefer to use OpenType fonts
over Type~1 fonts, so different typescript definitions are used behind
the scenes, and the second argument to \type{\usetypescript} becomes
optional. 

For example,

\starttyping
\usetypescript[palatino]
\setupbodyfont[palatino,12pt]
\stoptyping

will make \XETEX\ and \LUATEX\ load the OpenType font Pagella a free
font from the \TeX\ Gyre project, that also looks just like the
commercial font Linotype Palatino. You may as well leave the second
argument in place: while it will always be ignored by \LUATEX, 
\XETEX\ will actually use that encoding if the typescript uses Type~1
fonts instead of the more modern OpenType or TrueType font formats. 
%TH Note: I think so, at least

A typescript attaches meaning to some or all of the five font styles,
so you can e.g. do this:

\starttyping
\usetypescript[times][texnansi]
\setupbodyfont[times,sans,12pt]
\stoptyping

and end up using the OpenType font \TeX\ Gyre Heros or the Type~1 font
URW Nimbus Sans~L, both very similar in appearance to Linotype
Helvetica.

\subsection{Combining fonts into font collections (typescripts)}

\macros{\tex{starttypescript}}
\macros{\tex{definetypeface}}

There are quite a few predefined typeface identifiers that come with
\CONTEXT; these are listed in the ~\in{four tables}[tab:body font names 1],
\in{four tables}[tab:body font names 2], \in{four tables}[tab:body font names 3], 
and \in{four tables}[tab:body font names 4].

% TH notes: 
% I decided not to document the junk in type-pre and type-akb

\startbuffer[bodyfontst1free]
\switchtobodyfont[6pt]
\starttabulate[|l|l|l|l|p|]
\NC Identifier     \NC Needed font package    \NC file      \NC Encodings           \NC Supported styles \NC \NR
\NC modern         \NC Latin Modern                     \NC type-one  \NC ec, qx, texnansi, t5, uc    \NC serif, sans, mono, math, boldmath, bfmath \NC \NR 
\NC latin-modern   \NC Latin Modern                     \NC type-one  \NC ec, qx, texnansi, t5, uc    \NC serif, sans, mono, math, boldmath, bfmath \NC \NR 
\NC computer-modern\NC Latin Modern                     \NC type-one  \NC cyr, lcy, t2a, t2b, t2c, x2 \NC serif, sans, mono, math, boldmath, bfmath  \NC \NR 
\NC simple         \NC Latin Modern                     \NC type-one  \NC -- synonyms only --         \NC serif \NC \NR 
\NC concrete       \NC -- MF bitmaps --                 \NC type-one  \NC -- hardcoded --             \NC serif \NC \NR
\NC euler          \NC Euler                            \NC type-one  \NC -- hardcoded --             \NC math, boldmath, bfmath\NC \NR
\NC ams            \NC AMS Symbols                      \NC type-one  \NC -- hardcoded --             \NC math\NC \NR
\NC fourier        \NC Fourier                          \NC type-one  \NC ec                          \NC math, serif \NC \NR
\NC courier        \NC URW PostScript (or Adobe)        \NC type-one  \NC 8r, ec, qx, texnansi, t5    \NC mono \NC \NR
\NC helvetica      \NC URW PostScript (or Adobe)        \NC type-one  \NC 8r, ec, qx, texnansi, t5    \NC sans \NC \NR
\NC times          \NC URW PostScript (or Adobe)        \NC type-one  \NC 8r, ec, qx, texnansi, t5, uc\NC serif, math \NC \NR
\NC palatino       \NC URW PostScript (or Adobe)        \NC type-one  \NC 8r, ec, qx, texnansi, t5, uc\NC serif, math \NC \NR
\NC bookman        \NC URW PostScript (or Adobe)        \NC type-one  \NC 8r, ec, qx, texnansi, t5    \NC serif \NC \NR
\NC schoolbook     \NC URW PostScript (or Adobe)        \NC type-one  \NC 8r, ec, texnansi, t5        \NC serif \NC \NR
\NC chancery       \NC URW PostScript (or Adobe)        \NC type-one  \NC 8r, ec, qx, texnansi        \NC calligraphy \NC \NR
\NC charter        \NC Bitstream Charter                \NC type-one  \NC 8r, ec, texnansi            \NC serif \NC \NR
\NC utopia         \NC Adobe Utopia                     \NC type-one  \NC ec, texnansi                \NC serif \NC \NR
\NC antykwa-torunska           \NC Antykwa Torunska     \NC type-one  \NC texnansi,qx,t5,ec,t2a,t2b,t2c,greek \NC serif, math \NR
\NC antykwa-torunska-light     \NC Antykwa Torunska     \NC type-one  \NC texnansi,qx,t5,ec,t2a,t2b,t2c,greek \NC serif, math \NR
\NC antykwa-torunska-cond      \NC Antykwa Torunska     \NC type-one  \NC texnansi,qx,t5,ec,t2a,t2b,t2c,greek \NC serif, math \NR
\NC antykwa-torunska-lightcond \NC Antykwa Torunska     \NC type-one  \NC texnansi,qx,t5,ec,t2a,t2b,t2c,greek \NC serif, math \NR
\NC antykwa-poltawskiego       \NC Antykwa Poltawskiego \NC type-one  \NC 8r, ec, texnansi                    \NC serif \NR
\NC iwona            \NC Iwona                 \NC type-one  \NC ec, qx, texnansi, t5\NC sans, math \NC \NR
\NC iwona-light      \NC Iwona                 \NC type-one  \NC ec, qx, texnansi, t5\NC sans, math \NC \NR
\NC iwona-medium     \NC Iwona                 \NC type-one  \NC ec, qx, texnansi, t5\NC sans, math \NC \NR
\NC iwona-heavy      \NC Iwona                 \NC type-one  \NC ec, qx, texnansi, t5\NC sans, math \NC \NR
\NC iwona-cond       \NC Iwona                 \NC type-one  \NC ec, qx, texnansi, t5\NC sans \NC \NR
\NC iwona-light-cond \NC Iwona                 \NC type-one  \NC ec, qx, texnansi, t5\NC sans \NC \NR
\NC iwona-medium-cond\NC Iwona                 \NC type-one  \NC ec, qx, texnansi, t5\NC sans \NC \NR
\NC iwona-heavy-cond \NC Iwona                 \NC type-one  \NC ec, qx, texnansi, t5\NC sans \NC \NR
\NC kurier           \NC Kurier                \NC type-one  \NC ec, qx, texnansi, t5\NC sans, math \NC \NR
\NC kurier-light     \NC Kurier                \NC type-one  \NC ec, qx, texnansi, t5\NC sans, math \NC \NR
\NC kurier-medium    \NC Kurier                \NC type-one  \NC ec, qx, texnansi, t5\NC sans, math \NC \NR
\NC pagella          \NC TeX Gyre              \NC type-gyr  \NC ec, texnansi, cs, el, qx, rm, t5, t2a, t2b, t2c, l7x \NC serif\NC \NR
\NC palatino         \NC TeX Gyre              \NC type-gyr  \NC ec, texnansi, cs, el, qx, rm, t5, t2a, t2b, t2c, l7x \NC serif\NC \NR
\NC termes           \NC TeX Gyre              \NC type-gyr  \NC ec, texnansi, cs, el, qx, rm, t5, t2a, t2b, t2c, l7x \NC serif\NC \NR
\NC times            \NC TeX Gyre              \NC type-gyr  \NC ec, texnansi, cs, el, qx, rm, t5, t2a, t2b, t2c, l7x \NC serif\NC \NR
\NC bonum            \NC TeX Gyre              \NC type-gyr  \NC ec, texnansi, cs, el, qx, rm, t5, t2a, t2b, t2c, l7x \NC serif\NC \NR
\NC bookman          \NC TeX Gyre              \NC type-gyr  \NC ec, texnansi, cs, el, qx, rm, t5, t2a, t2b, t2c, l7x \NC serif\NC \NR
\NC schola           \NC TeX Gyre              \NC type-gyr  \NC ec, texnansi, cs, el, qx, rm, t5, t2a, t2b, t2c, l7x \NC serif\NC \NR
\NC schoolbook       \NC TeX Gyre              \NC type-gyr  \NC ec, texnansi, cs, el, qx, rm, t5, t2a, t2b, t2c, l7x \NC serif\NC \NR
\NC heros            \NC TeX Gyre              \NC type-gyr  \NC ec, texnansi, cs, el, qx, rm, t5, t2a, t2b, t2c, l7x \NC sans\NC \NR
\NC helvetica        \NC TeX Gyre              \NC type-gyr  \NC ec, texnansi, cs, el, qx, rm, t5, t2a, t2b, t2c, l7x \NC sans\NC \NR
\NC adventor         \NC TeX Gyre              \NC type-gyr  \NC ec, texnansi, cs, el, qx, rm, t5, t2a, t2b, t2c, l7x \NC sans\NC \NR
\NC cursor           \NC TeX Gyre              \NC type-gyr  \NC ec, texnansi, cs, el, qx, rm, t5, t2a, t2b, t2c, l7x \NC mono\NC \NR
\NC courier          \NC TeX Gyre              \NC type-gyr  \NC ec, texnansi, cs, el, qx, rm, t5, t2a, t2b, t2c, l7x \NC mono\NC \NR
\NC omega            \NC Omega fonts           \NC type-omg  \NC -- hardcoded --    \NC naskh, serif, mono\NC \NR
\NC cbgreek          \NC cbgreek               \NC type-cbg  \NC -- hardcoded --    \NC serif, sans, mono \NC \NR
\NC cbgreek-medium   \NC cbgreek               \NC type-cbg  \NC -- hardcoded --    \NC serif, sans, mono \NC \NR
\NC cbgreek-all      \NC cbgreek               \NC type-cbg  \NC -- hardcoded --    \NC serif, sans, mono \NC \NR
\NC cow              \NC \CONTEXT\ cow font    \NC type-cow  \NC -- hardcoded --    \NC math, serif \NC \NR
\NC sheep            \NC \CONTEXT\ cow font    \NC type-cow  \NC -- hardcoded --    \NC math, serif \NC \NR

\stoptabulate
\stopbuffer

\startbuffer[bodyfontst1buy]
\switchtobodyfont[6pt]
\starttabulate[|l|l|l|l|p|]
\NC Identifier           \NC Needed font package    \NC file      \NC Encodings           \NC Supported styles \NC \NR
\NC lucida               \NC Lucida (Y\&Y, TUG)     \NC type-buy  \NC 8r, ec, texnansi, uc\NC serif, sans, mono, handwriting, calligraphy, math, 
                                                                                             boldmath, bfmath, casual, fax \NC \NR
\NC informal             \NC Micropress Informal    \NC type-buy \NC -- hardcoded --     \NC casual, math\NC \NR
\NC officina             \NC ITC Officina           \NC type-buy \NC 8r, ec, texnansi    \NC serif, sans\NC \NR
\NC meta                 \NC FF Meta                \NC type-buy \NC 8r, ec, texnansi    \NC serif, sans, expert \NC \NR
\NC meta-medium          \NC FF Meta                \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-lf              \NC FF Meta                \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-book            \NC FF Meta                \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-book-lf         \NC FF Meta                \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-bold            \NC FF Meta                \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-bold-lf         \NC FF Meta                \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-normal          \NC FF Meta                \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-normal-lf       \NC FF Meta                \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-medium          \NC FF Meta                \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-medium-lf       \NC FF Meta                \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-black           \NC FF Meta                \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC meta-black-lf        \NC FF Meta                \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC univers              \NC Linotype Univers       \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC univers-light        \NC Linotype Univers       \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC univers-black        \NC Linotype Univers       \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC mendoza              \NC Mendoza                \NC type-buy \NC 8r, ec, texnansi    \NC serif \NC \NR
\NC frutiger             \NC Frutiger               \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC kabel                \NC ITC Kabel              \NC type-buy \NC 8r, ec, texnansi    \NC sans \NC \NR
\NC thesans              \NC FF The Sans            \NC type-buy \NC 8r, ec, texnansi    \NC sans, mono, expert \NC \NR
\NC sabon                \NC Monotype Sabon         \NC type-buy \NC 8r, ec, texnansi    \NC serif \NC \NR
\NC stone                \NC ITC Stone              \NC type-buy \NC ec, texnansi        \NC serif, sans \NC \NR
\NC stone-oldstyle       \NC ITC Stone              \NC type-buy \NC -- synonyms only -- \NC serif, sans \NC \NR
\NC industria            \NC Linotype Industria     \NC type-buy \NC ec, texnansi        \NC sans \NC \NR
\NC bauhaus              \NC ITC Bauhaus            \NC type-buy \NC ec, texnansi        \NC sans \NC \NR
\NC swift                \NC EF Swift               \NC type-buy \NC ec, texnansi        \NC serif \NC \NR
\NC swift-light          \NC EF Swift               \NC type-buy \NC -- synonyms only -- \NC serif \NC \NR
\NC syntax               \NC Linotype Syntax        \NC type-buy \NC ec, texnansi        \NC sans \NC \NR
\NC linoletter           \NC Linotype Linoletter    \NC type-buy \NC ec, texnansi        \NC serif \NC \NR
\NC zapfino              \NC ZapfinoT1              \NC type-ghz \NC 8r, ec, texnansi    \NC serif, handwriting\NC \NR
\NC palatino-sans-light  \NC Palatino Sans Nova T1  \NC type-exp \NC texnansi, ec        \NC sans\NC \NR
\NC palatino-sans-normal \NC Palatino Sans Nova T1  \NC type-exp \NC texnansi, ec        \NC sans\NC \NR
\NC palatino-sans-medium \NC Palatino Sans Nova T1  \NC type-exp \NC texnansi, ec        \NC sans\NC \NR
\NC opus                 \NC Fontsite 500 Opus      \NC type-fsf \NC 8r, ec, texnansi    \NC sans\NC \NR
\NC typewriter           \NC Fontsite 500 Typewriter\NC type-fsf \NC 8r, ec, texnansi    \NC mono\NC \NR
\NC garamond             \NC Fontsite 500 Garamond  \NC type-fsf \NC 8r, ec, texnansi    \NC serif\NC \NR
\NC optima               \NC Optima Nova T1         \NC type-ghz \NC 8r, ec, texnansi    \NC sans\NC \NR
\NC optima-nova          \NC Optima Nova T1         \NC type-ghz \NC 8r, ec, texnansi    \NC sans\NC \NR
\NC optima-nova-os       \NC Optima Nova T1         \NC type-ghz \NC 8r, ec, texnansi    \NC sans\NC \NR
\NC optima-nova-light    \NC Optima Nova T1         \NC type-ghz \NC 8r, ec, texnansi    \NC sans\NC \NR
\NC optima-nova-medium   \NC Optima Nova T1         \NC type-ghz \NC 8r, ec, texnansi    \NC sans\NC \NR
\NC palatino             \NC Palatino Nova T1       \NC type-ghz \NC 8r, ec, texnansi    \NC serif\NC \NR
\NC palatino-nova        \NC Palatino Nova T1       \NC type-ghz \NC 8r, ec, texnansi    \NC serif\NC \NR
\NC palatino-nova-os     \NC Palatino Nova T1       \NC type-ghz \NC 8r, ec, texnansi    \NC serif\NC \NR
\NC palatino-nova-light  \NC Palatino Nova T1       \NC type-ghz \NC 8r, ec, texnansi    \NC serif\NC \NR
\NC palatino-nova-medium \NC Palatino Nova T1       \NC type-ghz \NC 8r, ec, texnansi    \NC serif\NC \NR
\NC aldus-nova           \NC Aldus Nova T1          \NC type-ghz \NC 8r, ec, texnansi    \NC serif\NC \NR
\NC melior               \NC Melior T1              \NC type-ghz \NC 8r, ec, texnansi    \NC serif\NC \NR
\NC verdana              \NC Microsoft Windows      \NC type-msw \NC texnansi            \NC sans\NC \NR
\NC arial                \NC Microsoft Windows      \NC type-msw \NC texnansi            \NC sans\NC \NR
\stoptabulate									         
\stopbuffer									         

\startbuffer[bodyfontsotffree]
\switchtobodyfont[6pt]

\starttabulate[|l|l|l|p|]
\NC Identifier                 \NC Needed font package    \NC file     \NC Supported styles \NC \NR
\NC modern                     \NC Latin Modern           \NC type-otf \NC serif, sans, mono, math, boldmath, bfmath \NC \NR 
\NC latin-modern               \NC Latin Modern           \NC type-otf \NC serif, sans, mono, math, boldmath, bfmath \NC \NR 
\NC modern-vari                \NC Latin Modern           \NC type-otf \NC mono \NC \NR 
\NC latin-modern-vari          \NC Latin Modern           \NC type-otf \NC mono \NC \NR 
\NC modern-cond                \NC Latin Modern           \NC type-otf \NC mono \NC \NR 
\NC latin-modern-cond          \NC Latin Modern           \NC type-otf \NC mono \NC \NR 
\NC computer-modern            \NC Latin Modern           \NC type-otf \NC serif, sans, mono, math, boldmath, bfmath \NC \NR 
\NC concrete                   \NC -- MF bitmaps --       \NC type-otf \NC serif \NC \NR
\NC euler                      \NC Euler                  \NC type-otf \NC math, boldmath, bfmath\NC \NR
\NC ams                        \NC AMS                    \NC type-otf \NC math \NC \NR
\NC pagella                    \NC TeX Gyre               \NC type-otf \NC serif \NC \NR
\NC termes                     \NC TeX Gyre               \NC type-otf \NC serif \NC \NR
\NC bonum                      \NC TeX Gyre               \NC type-otf \NC serif \NC \NR
\NC schola                     \NC TeX Gyre               \NC type-otf \NC serif \NC \NR
\NC chorus                     \NC TeX Gyre               \NC type-otf \NC serif \NC \NR
\NC heros                      \NC TeX Gyre               \NC type-otf \NC sans \NC \NR
\NC adventor                   \NC TeX Gyre               \NC type-otf \NC sans \NC \NR
\NC cursor                     \NC TeX Gyre               \NC type-otf \NC sans \NC \NR
\NC palatino                   \NC TeX Gyre               \NC type-otf \NC serif, math \NC \NR
\NC times                      \NC TeX Gyre               \NC type-otf \NC serif, math \NC \NR
\NC bookman                    \NC TeX Gyre               \NC type-otf \NC serif \NC \NR
\NC schoolbook                 \NC TeX Gyre               \NC type-otf \NC serif \NC \NR
\NC chancery                   \NC TeX Gyre               \NC type-otf \NC calligraphy \NC \NR
\NC helvetica                  \NC TeX Gyre               \NC type-otf \NC sans \NC \NR
\NC courier                    \NC TeX Gyre               \NC type-otf \NC mono \NC \NR
\NC antykwa-torunska           \NC Antykwa Torunska       \NC type-otf \NC serif, math \NC \NR
\NC antykwa-torunska-light     \NC Antykwa Torunska       \NC type-otf \NC serif, math \NC \NR
\NC antykwa-torunska-cond      \NC Antykwa Torunska       \NC type-otf \NC serif, math \NC \NR
\NC antykwa-torunska-lightcond \NC Antykwa Torunska       \NC type-otf \NC serif, math \NC \NR
\NC antykwa-poltawskiego       \NC Antykwa Poltawskiego   \NC type-otf \NC serif \NC \NR
\NC iwona-light                \NC Iwona                  \NC type-otf \NC sans, math \NC \NR
\NC iwona                      \NC Iwona                  \NC type-otf \NC sans, math \NC \NR
\NC iwona-medium               \NC Iwona                  \NC type-otf \NC sans, math \NC \NR
\NC iwona-heavy                \NC Iwona                  \NC type-otf \NC sans, math \NC \NR
\NC iwona-cond                 \NC Iwona                  \NC type-otf \NC sans \NC \NR
\NC iwona-light-cond           \NC Iwona                  \NC type-otf \NC sans \NC \NR
\NC iwona-medium-cond          \NC Iwona                  \NC type-otf \NC sans \NC \NR
\NC iwona-heavy-cond           \NC Iwona                  \NC type-otf \NC sans \NC \NR
\NC kurier                     \NC Kurier                 \NC type-otf \NC sans, math \NC \NR
\NC kurier-light               \NC Kurier                 \NC type-otf \NC sans, math \NC \NR
\NC kurier-medium              \NC Kurier                 \NC type-otf \NC sans, math \NC \NR
\NC charter                    \NC Bitstream Charter      \NC type-otf \NC serif \NC \NR
\NC gentium                    \NC SIL Gentium            \NC type-xtx \NC serif \NC \NR
\stoptabulate
\stopbuffer

\startbuffer[bodyfontsotfbuy]
\switchtobodyfont[6pt]

\starttabulate[|l|l|l|p|]
\NC Identifier                 \NC Needed font package    \NC file     \NC Supported styles \NC \NR
\NC zapfino                    \NC Zapfino Pro OTF        \NC type-hgz \NC serif, handwriting\NC \NR
\NC optima-nova                \NC Optima Nova OTF        \NC type-hgz \NC sans\NC \NR
\NC optima-nova-os             \NC Optima Nova OTF        \NC type-hgz \NC sans\NC \NR
\NC optima-nova-light          \NC Optima Nova OTF        \NC type-hgz \NC sans\NC \NR
\NC optima-nova-medium         \NC Optima Nova OTF        \NC type-hgz \NC sans\NC \NR
\NC palatino-nova              \NC Palatino Nova OTF      \NC type-hgz \NC serif\NC \NR
\NC palatino-nova-os           \NC Palatino Nova OTF      \NC type-hgz \NC serif\NC \NR
\NC palatino-nova-light        \NC Palatino Nova OTF      \NC type-hgz \NC serif\NC \NR
\NC palatino-nova-medium       \NC Palatino Nova OTF      \NC type-hgz \NC serif\NC \NR
\NC palatino-sans              \NC Palatino Nova OTF      \NC type-hgz \NC sans\NC \NR
\NC palatino-informal          \NC Palatino Nova OTF      \NC type-hgz \NC sans\NC \NR
\NC melior                     \NC Melior OTF             \NC type-hgz \NC serif\NC \NR
\NC -- all four-variant fonts -- \NC -- any OTF vendor -- \NC type-xtx \NC Xserif \NC \NR
\NC -- all four-variant fonts -- \NC -- any OTF vendor -- \NC type-xtx \NC Xsans \NC \NR
\NC -- all four-variant fonts -- \NC -- any OTF vendor -- \NC type-xtx \NC Xmono \NC \NR
\NC times                      \NC MacOSX                 \NC type-xtx \NC serif \NC \NR
\NC palatino                   \NC MacOSX (Book Antiqua)  \NC type-xtx \NC serif \NC \NR
\NC helvetica                  \NC MacOSX (Helvetica Neue)\NC type-xtx \NC sans \NC \NR
\NC courier                    \NC MacOSX                 \NC type-xtx \NC mono \NC \NR
\NC hoefler                    \NC MacOSX                 \NC type-xtx \NC serif \NC \NR
\NC lucidagrande               \NC MacOSX                 \NC type-xtx \NC sans \NC \NR
\NC optima                     \NC MacOSX                 \NC type-xtx \NC sans \NC \NR
\NC gillsans                   \NC MacOSX                 \NC type-xtx \NC sans \NC \NR
\NC gillsanslt                 \NC MacOSX                 \NC type-xtx \NC sans \NC \NR
\NC zapfino                    \NC MacOSX                 \NC type-xtx \NC handwriting, serif \NC \NR
\NC applechancery              \NC MacOSX                 \NC type-xtx \NC calligraphy, serif \NC \NR
\NC timesnewroman              \NC MS Office              \NC type-xtx \NC serif \NC \NR
\NC arial                      \NC MS Office              \NC type-xtx \NC sans \NC \NR
\NC lucida                     \NC MS Office              \NC type-xtx \NC serif, sans, mono, handwriting, calligraphy, fax\NC \NR
\stoptabulate
\stopbuffer

\placetable
  [here]
  [tab:body font names 1]
  {The predefined body font identifiers for free Type~1 and \METAFONT\ fonts}
  {\getbuffer[bodyfontst1free]}


\placetable
  [here]
  [tab:body font names 2]
  {The predefined body font identifiers for commercial Type~1 fonts}
  {\getbuffer[bodyfontst1buy]}

\placetable
  [here]
  [tab:body font names 3]
  {The predefined body font identifiers for free Unicode (Opentype) fonts}
  {\getbuffer[bodyfontsotffree]}


\placetable
  [here]
  [tab:body font names 4]
  {The predefined body font identifiers for commercial Unicode (Opentype) fonts}
  {\getbuffer[bodyfontsotfbuy]}





\section[font switching]{Font switching}
\index{fonts}
\index{roman}
\index{slanted}
\index{boldface}
\index{italic}
\index{typewriter}
\index{sans serif}
\index{old style}
\index{medaeval numbers}

The mechanism to switch from one style to another is rather complex
and therefore hard to explain. To begin with, the terminology is a bit
fuzzy. We call a collection of font shapes, like Lucida or Computer
Modern Roman a family.  Within such a family, the members can be
grouped according to characteristics. Such a group is called a
style. Examples of styles within a family are: {\rmtf roman}, {\sstf
sans serif} and {\tttf teletype}. We already saw that there can be
alternative classifications, but they all refer to the pressence of
serifs and the glyphs having equal widths. In some cases handwritten
and|/|or calligraphic styles are also available. Within a style there
can be alternatives, like {\bf boldface} and {\sl slanted}.

There are different ways to change into a new a style or
alternative. You can use \type {\ss} to switch to a sans
serif font style and \type {\bf} to get a bold alternative.
When a different style is chosen, the alternatives adapt
themselves to this style. Often we will typeset the document
in one family and style. This is called the bodyfont.

A consequent use of commands like \type {\bf} and \type
{\sl} in the text will automatically result in the desired
bold and slanted altermatives when you change the family or
style in the setup area of your input file. A somewhat
faster way of style switching is done by \type {\ssbf},
\type {\sssl}, etc. but this should be used with care, since
far less housekeeping takes place.

The alternatives within a style are given below. The
abbreviation \type {\sl} means {\sl slanted}, \type {\it}
means {\it italic} and \type {\bf} means {\bf boldface}.
Sometimes \type {\bs} and \type {\bi} are also available,
meaning {\bs bold slanted} and {\bi bold italic}. When an
alternative is not known, \CONTEXT\ will choose a suitable
replacement automatically.

With \type {\os} we tell \CONTEXT\ that we prefer mediaeval or
old||style numbers {\os 139} over {\rm 139}. The \type {\sc}
generates {\sc Small Caps}. With an \type {x} we switch to
smaller font size, with \type {a}, \type {b}, \type {c} and
\type {d} to a bigger one. The actual font style is stated
by \type {\tf} or typeface.

\startexample
\starttyping
\tfa \tfb \tfc \tfd
\tfx \bfx \slx \itx
\bf \sl \it \bs \bi \sc \os
\stoptyping
\stopexample

It depends on the completeness of the font definition files
whether alternatives like \type {\bfa}, \type {\bfb}, etc.
are available. Not all fonts have for instance italic and
slanted or both their bold alternatives. In such situations,
slanted and italic are threated as equivalents.

Switching to a smaller font is accomplished by \type {\tfx},
\type {\bfx}, \type {\slx}, etc., which adapt themselves to
the actual alternative. An even more general downscaling is
achieved by \type {\tx}, which adapts itself to the style
and alernative. This command is rather handy when one wants
to write macros that act like a chameleon. Going one more
step smaller, is possible too: \type {\txx}. Using \type
{\tx} when \type {\tx} is already given, is equivalent to
\type {\txx}.

Frequent font switching leads to longer processing times.
When no sub- or superscripts are used and you are very
certain what font you want to use, you can perform fast font
switches with: \type {\rmsl}, \type {\ssbf}, \type {\tttf},
etc.

Switching to another font style is done by:

\startexample
\starttyping
\rm \ss \tt \hw \cg
\stoptyping
\stopexample

When \type {\rm} is chosen \CONTEXT\ will interpret the
command \type {\tfd} as \type {\rmd}. All default font
setups use \type {tf}||setups and will adapt automatically.

The various commands will adapt themselves to the actual
setup of font and size. For example:

\startbuffer
{\rm test {\sl test} {\bf test} \tfc test {\tx test} {\bf test}}
{\ss test {\sl test \tx test} {\bf test \tx test}}
\stopbuffer

\startexample
\typebuffer
\stopexample

will result in:

\startreality
\startlines
\getbuffer
\stoplines
\stopreality

When a character is not available the most acceptable
alternative is chosen.

We will not go into the typographical sins of underlining.
These commands are discussed in \in {section} [underline]
(\over [underline]).

\todo{The next par may need more explaining }

Note: the plain \TeX\ compatible font switches \type {\vi}, \type
{\vii}, \type {\viii}, \type {\ix}, \type {\x},
and \type {\xii} are also still defined, these have local effects
like \type{\tfx} and \type{\tfa}. 

\section[character]{Characters}
\index{\type{character}}

A number of commands use the parameter \type {style} to set
up the font style and size. You can use commands like
\type {\sl} or \type {\rma} or keywords like:

\startexample
\starttyping
normal  bold  slanted  boldslanted  italic  bolditalic  type
small  smallbold  smallslanted  ...  smallitalic  ...  smalltype
capital
\stoptyping
\stopexample

The parameter mechanism is rather flexible so with the
parameter \type {style} you can type \type {bold} and \type
{\bf} or \type {bf}. Even the most low level kind of font
switching commands like \type {12ptrmbf} are permitted. This
is fast but requires some insight in macros behind this
mechanism.

\section[fonts]{Available alternatives}
\index{\type{cmr}}
\index{\type{eul}}
\index{\type{con}}
\index{\type{lbr}}

There are only a few font families that can handle math. There
is the Computer Modern Roman, the very beautiful Lucida
Bright that we prefer in electronic documents, and of course
one can use the \quote {prefered by publishers font} Times.
These fonts carry a complete set of characters and symbols
for mathematical typesetting. Among these, the Computer
Modern Roman distinguishes itself by its many design sizes,
which pays off when typesetting complicate math. On this
design there are a few variations called Euler and Concrete.
\footnote {See Concrete Mathematics by Knuth cs., an
outstanding book from the perspective of typography and
didactically.}

The Computer Modern Roman contains 70~charactertypes and
sizes. Because a number of charactersizes are not defined
the 11~point characters are defined as scaled 9~and
10~point characters under the option \type {cmr}. With
\type {eul} and \type {con} we obtain a Computer Modern.

\showsetup{showbodyfont}

With the command \type {\showbodyfont} an overview is
generated of the available characters. Below the 12pt||body
font Computer Modern Roman (\type {cmr}) is shown. The close
reader will note that not all alternatives are available by
default.

\showbodyfont[cmr,12pt]

We can see that the 12pt Lucida Bright (\type {lbr}) is
somewhat bigger than the 12pt Computer Modern Roman. An
\type {x}||character for example \type {\bfx} is 2pts smaller
than the actual typeface. The bigger characters are scaled
by \TEX's \type {\magstep}.

\showbodyfont[lbr,12pt]

A last remark. When you have chosen a larger charactersize,
for example \type {\tfb}, then \type {\tf} equals \type {\tfb},
\type {\bf} equals \type {\bfb}, etc. This method is
preferable over returning to the original character size.

\section[emphasize]{Emphasize}
\index{emphasize}
\index{slanted}
\index{italic}
\macro{\tex{em}}

Within most macropackages the command \type {\em} is
available. This command behaves like a chameleon which means
that it will adapt to the actual typeface. In \CONTEXT\
\type {\em} has the following characteristics:

\startitemize[packed]
\item a switch to {\sl slanted} or {\it
      italic} is possible
\item a switch within \type {\bf} results in {\bs bold
      slanted} or {\bi bold italic} (when available)
\item a so called {\em italic correction} is performed
      automatically (\type {\/})
\stopitemize

The bold italic or bold slanted characters are supported only
when \type {\bs} and \type {\bi} are available.

\startbuffer
The mnemonic {\em em} means {\em emphasis}.
{\em The mnemonic {\em em} means {\em emphasis}.}
{\bf The mnemonic {\em em} means {\em emphasis}.}
{\em \bf The mnemonic {\em em} {\em emphasis}.}
{\it The mnemonic em {\em means \bf emphasis}.}
{\sl The mnemonic em {\em means \bf emphasis}.}
\stopbuffer

\startexample
\typebuffer
\stopexample

This results in:

\startlines
\getbuffer
\stoplines

The advantage of the use of \type {\em} over \type {\it}
and|/|or \type {\sl} is that consistent typesetting is
enforced.

By default emphasis is set at {\em slanted}, but in this text
it is set at {\em italic}. The setting is made by:

\startexample
\starttyping
\setupbodyfontenvironment[default][em=italic]
\stoptyping
\stopexample

\section[capitals]{Capitals}
\index{capital characters}
\index{capitals}
\index{small capitals}
\index{small||caps}
\macro{\tex{setupcapitals}}
\macro{\tex{CAP}}
\macro{\tex{Cap}}
\macro{\tex{cap}}
\macro{\tex{nocap}}
\macro{\tex{Caps}}
\macro{\tex{Words}}
\macro{\tex{WORDS}}
\macro{\tex{Word}}
\macro{\tex{characters}}

Words and abbreviations can be typeset in capitals. Both
small and big characters are converted into capitals. When
\type {\cap} is used to typeset a capital the size is that
of an \type {\tx}. When we switch to slanted (\type {\sl}),
bold (\type {\bf}), etc. the capital letter will also
change. Since \type {\cap} has a specific meaning in math
mode, the format implementation is called \type {\cap}.
However in text mode one can use \type {\cap}.

\showsetup{kap}

\showsetup{Cap}

\showsetup{CAP}

\showsetup{Caps}

The first command converts all letters to a capital. We
advise you not to type capital letters in your source file
because real small caps distinguishes between small and big
letters.

\startbuffer
Capitals for \cap {UK} are \cap {OK} and capitals for \cap {USA} are
okay. But what about capitals in \cap {Y2K}.
\stopbuffer

\startexample
\typebuffer
\stopexample

this results in:

\startreality
\getbuffer
\stopreality

A \type {\cap} within a \type {\cap} will not lead to any
problems:

\startbuffer
\cap {People that have gathered their \cap {capital} at the cost of other
people are not seldom \nocap {decapitated} in revolutionary times.}
\stopbuffer

\startexample
\typebuffer
\stopexample

or:

\startreality
\getbuffer
\stopreality

In this example we see that \type {\cap} can be temporarily
revoked by \type {\nocap}.

\showsetup{nocap}

The command \type {\Cap} changes the first character of a
word into a capital and \type {\CAP} changes letters that
are preceded by \type {\\} into capital letters. With \type
{\Caps} you can change the first character of several words
into a capital letter.

\showsetup{setupcapitals}

With this command the capital mechanism can be set up. The
key \type {sc=yes} switches to real {\sc Small Caps}. With
\type {title} we determine whether capitals in titles are
changed.

Next to the former \type {\cap}||commands we have:

\showsetup{Word}

and

\showsetup{Words}

These commands switch the first characters of words into
capitals. All characters in a word are changed with:

\showsetup{WORD}

We end this section with real small capitals. When these are
available the real small caps \type {\sc} are preferred over
the pseudo||capital in abbreviations and logos.

\startbuffer
In a manual on \TeX\ and Con\TeX t  there is always the question whether to
type \cap{\TeX} and \cap{Con\TeX t} or {\sc \TeX} and {\sc Con\TeX t}. Both
are defined as a logo in the style definition so we type \type {\TEX} and
\type {\CONTEXT}, which come out as \TEX\ and \CONTEXT.
\stopbuffer

\startexample
\typebuffer
\stopexample

Results in:

\startreality
\getbuffer
\stopreality

{\sc It is always possible to typeset text in small
capitals. However, realize that lower case characters
discriminate more and make for an easier read.}

An important difference between \type {\cap} and \type {\sc}
is that the last command is used for a specific designed
font type. The command \type {\cap} on the other hand adapts
itself to the actual typeface: {\sl \cap {kap}}, {\bf \cap
{kap}}, {\bs \cap {kap}}, etc.

Some typesetting packages stretch words (inter character
spacing) to reach an acceptable alignment. In \CONTEXT\
this not supported. On purpose! Words in titles can be
stretched by:

\showsetup{stretched}

\startbuffer
\hbox to \hsize {\stretched{there\\is\\much\\stretch\\in ...}}
\hbox to 20em   {\stretched{... and\\here\\somewhat\\less}}
\stopbuffer

\startexample
\typebuffer
\stopexample

With \type {\\} we enforce a space (\type {{}} is also
allowed).

\startreality
\leavevmode\getbuffer
\stopreality

These typographically non permitted actions are only allowed
in heads. The macros that take care of stretching do this
by processing the text character by character.


\section{Math fonts}
\index{math fonts}
\macro{\tex{mf}}
\macro{\tex{enablembox}}
\macro{\tex{definebodyfont}}


\startbuffer[math-1]
$\tf x^2+\bf x^2+\sl x^2+\it x^2+\bs x^2+ \bi x^2 =\rm 6x^2$
$\tf x^2+\bf x^2+\sl x^2+\it x^2+\bs x^2+ \bi x^2 =\tf 6x^2$
$\tf x^2+\bf x^2+\sl x^2+\it x^2+\bs x^2+ \bi x^2 =\bf 6x^2$
$\tf x^2+\bf x^2+\sl x^2+\it x^2+\bs x^2+ \bi x^2 =\sl 6x^2$
\stopbuffer

\startbuffer[math-2]
$\tf\mf x^2 + x^2 + x^2 + x^2 + x^2 + x^2 = 6x^2$
$\bf\mf x^2 + x^2 + x^2 + x^2 + x^2 + x^2 = 6x^2$
$\sl\mf x^2 + x^2 + x^2 + x^2 + x^2 + x^2 = 6x^2$
$\bs\mf x^2 + x^2 + x^2 + x^2 + x^2 + x^2 = 6x^2$
$\it\mf x^2 + x^2 + x^2 + x^2 + x^2 + x^2 = 6x^2$
$\bi\mf x^2 + x^2 + x^2 + x^2 + x^2 + x^2 = 6x^2$
\stopbuffer

\startbuffer[math-3]
$\bf x^2 + x^2 + x^2 + x^2 + x^2 + x^2 = \mf 6x^2$
\stopbuffer

\startbuffer[math-4]
$\bf x^2 + \hbox{whatever} + \sin(2x)$
\stopbuffer

\startbuffer[math-5]
\definebodyfont [12pt] [mm]
  [ex=cmex10 at 12pt,
   mi=cmmi12,
   sy=cmsy10 at 12pt]
\stopbuffer

\startbuffer[math-6]
\definebodyfont [10pt,11pt,12pt] [mm]
  [tf=Sans          sa 1,
   bf=SansBold      sa 1,
   sl=SansItalic    sa 1,
   ex=MathExtension sa 1,
   mi=MathItalic    sa 1,
   sy=MathSymbol    sa 1]

\setupbodyfont
\stopbuffer

Many \TEX\ users have chosen \TEX\ for its superb math type
setting. The math oriented character of \TEX\ has also
influenced the font mechanism. We will not go into any
details but the central key is the {\em family}. There is a
font family for \type {\bf}, \type {\it}, etc. Within a
family we distinguish three members: text, script and
scriptscript, or a normal, smaller and smallest font. The
normal font size is used for running text and the smaller
ones for sub and superscripts. The next example will show
what the members of a font family can do.

\typebuffer[math-1]

When this is typeset you see this:

\startlines
\getbuffer[math-1]
\stoplines

We can see that the characters adapt but that the
symbols are typeset in the same font. Technically this
means that the symbols are set in font family~0 (there are
16~families) and in this case that is default \type {\tf}.

It can also be done somewhat differently as we will see in
the next example. A new command is used: \type {\mf}, which
stands for {\em math font}. This command takes care of the
symbols in such a way that they are set in the actual
font.\footnote{We also see a strange visual effect. It seems
as if the lines are sloped.}

\startlines
\getbuffer[math-2]
\stoplines

You should take into account that \TEX\ typesets a formula
as a whole. In some cases this means that setups at the end
of the formula have effect at the beginning.

\typebuffer[math-2]

The exact location of \type {\mf} is not that important.
We also could have typed:

\typebuffer[math-3]

One other aspect of fonts in math mode is the way reserved
names like \type {\sin} and \type {\cos} are typeset.

\typebuffer[math-4]

Unlike plain \TEX, the $\bf\sin$ is also set bold.

\getbuffer[math-4]


\fixme{the following bits are in the wrong place  for sure, and may
be incorrect besides}

In \CONTEXT\ the 12pt math (Computer Modern) fonts are
defined with:

\typebuffer[math-5]

It is possible to use \type {\tf}, \type {\bf}, etc. within
math mode.

\typebuffer[math-6]

The example we used before would become:

{\enablembox\getbuffer[math-6]\getbuffer[math-4]}

\section{Em and Ex}
\index[em]{\type{em}}
\index[ex]{\type{ex}}

In specifying dimensions we can distinguish physical units
like \type {pt} and \type {cm} and internal units like \type
{em} and \type {ex}. These last units are related to the
actual fontsize. When you use these internal units in
specifying for example horizontal and vertical spacing you
don't have to do any recalculating when fonts are switched
in the style definition.

Some insight in these units does not hurt. The width of an
\type {em} is not the with of an M, but that of an --- (an
em||dash). When this glyph is not available in the font
another value is used. \in {Table} [ems] shows some
examples. We see that the width of a digit is about \type
{.5em}. In Computer Modern Roman a digit is excactly half
an em wide.

\startbuffer[em-ex-1]

\def\jump{\vl\hskip1em\vl}%
\def\mmmm{\vl M\vl}%
\def\dash{\vl---\vl}%
\def\numb{\vl12\vl}%

\starttable[|c|c|c|c|c|c|]
\HL
\VL \type{\tf} \VL \type{\bf} \VL \type{\sl}  \VL
    \type{\tt} \VL \type{\ss} \VL \type{\tfx} \VL\SR
\HL
\VL \tf\numb   \VL \bf\numb   \VL \sl \numb   \VL
    \tt\numb   \VL \ss\numb   \VL \tfx\numb   \VL\FR
\VL \tf\mmmm   \VL \bf\mmmm   \VL \sl \mmmm   \VL
    \tt\mmmm   \VL \ss\mmmm   \VL \tfx\mmmm   \VL\MR
\VL \tf\jump   \VL \bf\jump   \VL \sl \jump   \VL
    \tt\jump   \VL \ss\jump   \VL \tfx\jump   \VL\MR
\VL \tf\dash   \VL \bf\dash   \VL \sl \dash   \VL
    \tt\dash   \VL \ss\dash   \VL \tfx\dash   \VL\LR
\HL
\stoptable

\stopbuffer

\placetable
  [here][ems]
  {The width of an \type{em}.}
  {\getbuffer[em-ex-1]}

In most cases we use \type{em} for specifying width and and
\type {ex} for height. \in {Table} [exes] shows some
examples. We see that the height equals the height of a
lowercase~x.

\startbuffer[em-ex-2]

\def\show
  {\hbox
    {\forgetall
     \offinterlineskip
     \vbox
       {\hsize1em\hl[1]\endgraf\vskip1ex\hl[1]}%
     \hskip.25em
     \vbox
       {\hsize.5em \vskip\linewidth x\vskip\linewidth}}}%

\starttable[|c|c|c|c|c|c|]
\HL
\VL \type{\tf} \VL \type{\bf} \VL \type{\sl}  \VL
    \type{\tt} \VL \type{\ss} \VL \type{\tfx} \VL\SR
\HL
\VL \tf\show   \VL \bf\show   \VL \sl\show    \VL
    \tt\show   \VL \ss\show   \VL \tfx\show   \VL\SR
\HL
\stoptable

\stopbuffer

\placetable
  [here][exes]
  {The height of an \type{ex}.}
  {\getbuffer[em-ex-2]}


\section{Page texts}
\index{headers}
\index{footers}
\index{menus}

Page texts are texts that are placed in the headers,
footers, margins and edges of the so called pagebody. This
sentence is for instance typeset in the bodyfont in the
running text. The fonts of the page texts are set up by
means of different commands. The values of the parameters
may be something like \type {style=bold} but
\type {style=\ss\bf} is also allowed. Setups like
\type {style=\ssbf} are less obvious because commands like
\type {\cap} will not behave the way you expect.

Switching to a new font style (\type {\ss}) will cost some
time. Usually this is no problem but in interactive documents
where we may use interactive menus with dozens of
items and related font switches the effect can be
considerable. In that case a more efficient font switching
is:

\startexample
\starttyping
\setuplayout[style=\ss]
\stoptyping
\stopexample

Border texts are setup by its command and the related key.
For example footers may be set up with the key
\type {letter}:

\startexample
\starttyping
\setupfooter[style=bold]
\stoptyping
\stopexample


\section{Figures}
\index{figures+fonts}

When you use figures in your document they may contain text.
Most of time the \TEX||fonts are not available. When you use
a serif in your document you can best use a Helvetica in the
figures. In \in{figure}[fig:helvetica] we use a Helvetica,
while we use Knuth's Sans Serif in the caption.

\placefigure
  [here]
  [fig:helvetica]
  {\ss The use of fonts in pictures.}
  {\externalfigure[bor0129]}

\stopcomponent
